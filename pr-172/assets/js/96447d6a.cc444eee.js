"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2664],{65552:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"components/cli/policy/subject-condition-sets/create","title":"otdfctl policy subject-condition-sets create","description":"Example Subject Condition Sets","source":"@site/docs/components/cli/policy/subject-condition-sets/create.mdx","sourceDirName":"components/cli/policy/subject-condition-sets","slug":"/components/cli/policy/subject-condition-sets/create","permalink":"/pr-172/components/cli/policy/subject-condition-sets/create","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"otdfctl policy subject-condition-sets create"},"sidebar":"tutorialSidebar","previous":{"title":"otdfctl policy subject-condition-sets","permalink":"/pr-172/components/cli/policy/subject-condition-sets/"},"next":{"title":"otdfctl policy subject-condition-sets delete","permalink":"/pr-172/components/cli/policy/subject-condition-sets/delete"}}');var o=n(74848),r=n(28453),i=(n(96540),n(68818));const c={title:"otdfctl policy subject-condition-sets create"},l=void 0,d={},a=[{value:"Example Subject Condition Sets",id:"example-subject-condition-sets",level:3},{value:"Examples",id:"examples",level:2}];function h(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,o.jsxs)(i.A,{...JSON.parse('{"title":"Create a Subject Condition Set","command":{"name":"create","aliases":["c","add","new"],"flags":[{"name":"subject-sets","description":"A JSON array of subject sets, containing a list of condition groups, each with one or more conditions","shorthand":"s","required":true,"default":""},{"name":"subject-sets-file-json","description":"A JSON file with path from the current working directory containing an array of subject sets","shorthand":"j","default":"","required":false},{"name":"label","description":"Optional metadata \'labels\' in the format: key=value","shorthand":"l","default":""},{"name":"force-replace-labels","description":"Destructively replace entire set of existing metadata \'labels\' with any provided to this command","default":false}]},"fullCommand":"otdfctl policy subject-condition-sets create"}'),children:[(0,o.jsx)(t.h3,{id:"example-subject-condition-sets",children:"Example Subject Condition Sets"}),(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"--subject-sets"})," example input:"]}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "condition_groups": [\n      {\n        "conditions": [\n          {\n            "operator": 1,\n            "subject_external_values": ["CoolTool", "RadService", "ShinyThing"],\n            "subject_external_selector_value": ".team.name"\n          },\n          {\n            "operator": 2,\n            "subject_external_values": ["marketing"],\n            "subject_external_selector_value": ".org.name"\n          }\n        ],\n        "boolean_operator": 1\n      }\n    ]\n  }\n]\n'})}),(0,o.jsxs)(t.p,{children:["ConditionGroup ",(0,o.jsx)(t.code,{children:"boolean_operator"})," is driven through the API ",(0,o.jsx)(t.code,{children:"CONDITION_BOOLEAN_TYPE_ENUM"})," definition:"]}),(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"CONDITION_BOOLEAN_TYPE_ENUM"}),(0,o.jsx)(t.th,{children:"index value"}),(0,o.jsx)(t.th,{children:"comparison"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"AND"}),(0,o.jsx)(t.td,{children:"1"}),(0,o.jsx)(t.td,{children:"all conditions met"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"OR"}),(0,o.jsx)(t.td,{children:"2"}),(0,o.jsx)(t.td,{children:"any one condition met"})]})]})]}),(0,o.jsxs)(t.p,{children:["Condition ",(0,o.jsx)(t.code,{children:"operator"})," is driven through the API ",(0,o.jsx)(t.code,{children:"SUBJECT_MAPPING_OPERATOR_ENUM"})," definition,\nand is evaluated by applying the ",(0,o.jsx)(t.code,{children:"subject_external_selector_value"})," to the Subject entity\nrepresentation (token or Entity Resolution Service response) and comparing the logical operator\nagainst the list of ",(0,o.jsx)(t.code,{children:"subject_external_values"}),":"]}),(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"SUBJECT_MAPPING_OPERATOR_ENUM"}),(0,o.jsx)(t.th,{children:"index value"}),(0,o.jsx)(t.th,{children:"subject value at selector MUST"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"IN"}),(0,o.jsx)(t.td,{children:"1"}),(0,o.jsx)(t.td,{children:"be any of the values"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"NOT_IN"}),(0,o.jsx)(t.td,{children:"2"}),(0,o.jsx)(t.td,{children:"not be any of the values"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"IN_CONTAINS"}),(0,o.jsx)(t.td,{children:"3"}),(0,o.jsx)(t.td,{children:"contain one of the values"})]})]})]}),(0,o.jsxs)(t.p,{children:["In the example SCS above, the Subject entity MUST BE represented with a token claim or ERS response\ncontaining a field at ",(0,o.jsx)(t.code,{children:".team.name"}),' identifying them as team name "CoolTool", "RadService", or "ShinyThing", AND THEY MUST ALSO have a field ',(0,o.jsx)(t.code,{children:"org.name"}),' that is NOT "marketing".']}),(0,o.jsx)(t.p,{children:'This structure if their team name was "CoolTool" and they were entitled might look like:'}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "team": {\n    "name": "CoolTool" // could alternatively be RadService or ShinyThing\n  },\n  "org": {\n    "name": "sales"\n  }\n}\n'})}),(0,o.jsxs)(t.p,{children:["If any condition in the group is not met (such as if ",(0,o.jsx)(t.code,{children:".org.name"})," were ",(0,o.jsx)(t.code,{children:"marketing"})," instead),\nthe condition set would not resolve to true, and the Subject would not be found to be entitled\nto the Attribute Value applicable to this Subject Condition Set via Subject Mapping between."]}),(0,o.jsxs)(t.p,{children:["For more information about subject condition sets, see the ",(0,o.jsx)(t.code,{children:"subject-condition-sets"})," subcommand."]}),(0,o.jsx)(t.h2,{id:"examples",children:"Examples"}),(0,o.jsxs)(t.p,{children:["The following subject condition set would resolve to true if the field at ",(0,o.jsx)(t.code,{children:".example.field.one"})," is\n",(0,o.jsx)(t.code,{children:"myvalue"})," or ",(0,o.jsx)(t.code,{children:"myothervalue1"}),", or the field at ",(0,o.jsx)(t.code,{children:".example.field.two"})," is not equal to ",(0,o.jsx)(t.code,{children:"notpresentvalue"}),"."]}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:'otdfctl policy subject-condition-set create --subject-sets \'[\n  {\n    "condition_groups": [\n      {\n        "conditions": [\n          {\n            "operator": 1,\n            "subject_external_values": ["myvalue", "myothervalue"],\n            "subject_external_selector_value": ".example.field.one"\n          },\n          {\n            "operator": 2,\n            "subject_external_values": ["notpresentvalue"],\n            "subject_external_selector_value": ".example.field.two"\n          }\n        ],\n        "boolean_operator": 2\n      }\n    ]\n  }\n]\'\n'})}),(0,o.jsx)(t.p,{children:"You can perform the same action with the input contained in a file:"}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"otdfctl policy subject-condition-set create --subject-sets-file-json scs.json\n"})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},68818:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(96540);const o=(0,s.createContext)(null),r={didCatch:!1,error:null};class i extends s.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=r}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,n,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];null===(t=(n=this.props).onReset)||void 0===t||t.call(n,{args:o,reason:"imperative-api"}),this.setState(r)}}componentDidCatch(e,t){var n,s;null===(n=(s=this.props).onError)||void 0===n||n.call(s,e,t)}componentDidUpdate(e,t){const{didCatch:n}=this.state,{resetKeys:s}=this.props;var o,i;n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,n)=>!Object.is(e,t[n])))}(e.resetKeys,s)&&(null===(o=(i=this.props).onReset)||void 0===o||o.call(i,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(r))}render(){const{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:c}=this.state;let l=e;if(i){const e={error:c,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(n)l=(0,s.createElement)(n,e);else{if(void 0===r)throw c;l=r}}return(0,s.createElement)(o.Provider,{value:{didCatch:i,error:c,resetErrorBoundary:this.resetErrorBoundary}},l)}}var c=n(74848);function l({name:e,shorthand:t,description:n,default:s,required:o}){const r=(0,c.jsxs)("code",{children:["--",e," <",e,">"]}),i=t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("code",{children:["-",t]}),","]});return(0,c.jsxs)("dl",{children:[(0,c.jsxs)("dt",{children:[i," ",r]}),(0,c.jsxs)("dd",{children:[n,"\xa0(",(0,c.jsx)("em",{children:"required"}),": ",(0,c.jsx)("code",{children:o?"true":"false"}),")",s&&(0,c.jsxs)(c.Fragment,{children:["\xa0(",(0,c.jsx)("em",{children:"default"}),": ",(0,c.jsx)("code",{children:s}),")"]})]})]})}function d(e){return e?(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Options"}),e?.map((e=>(0,c.jsx)(l,{...e})))]}):null}function a(e){return e?(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Aliases"}),e?.map(((t,n)=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("code",{children:t}),n<e.length-1&&", "]})))]}):null}function h({children:e,fullCommand:t,title:n,command:s}){console.log(s);const{flags:o,args:r,arbitrary_args:i,aliases:l,hidden:h}=s;let u=t;return o&&(u+=" [flags]"),r&&(u+=" "+r.map((e=>`<${e}>`)).join(" ")),i&&(u+=" "+i.map((e=>`[${e}]`)).join(" ")),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("p",{children:[s.name," - ",n]})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Synopsis"}),(0,c.jsx)("pre",{children:(0,c.jsx)("code",{children:u})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Description"}),e]}),d(o),a(l)]})}function u({children:e,...t}){return(0,c.jsx)(i,{fallback:({error:e,tryAgain:t})=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{children:["This component crashed because of error: ",e.message,"."]}),(0,c.jsx)("button",{onClick:t,children:"Try Again!"})]}),children:(0,c.jsx)(h,{...t,children:e})})}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(96540);const o={},r=s.createContext(o);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);