"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[72],{94205:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>O,contentTitle:()=>_,default:()=>F,frontMatter:()=>T,metadata:()=>o,toc:()=>G});const o=JSON.parse('{"id":"sdks/policy","title":"Managing Policy","description":"","source":"@site/docs/sdks/policy.mdx","sourceDirName":"sdks","slug":"/sdks/policy","permalink":"/pr-172/sdks/policy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/pr-172/sdks/overview"},"next":{"title":"Creating TDFs","permalink":"/pr-172/sdks/tdf"}}');var r=n(74848),a=n(28453),i=n(45645),s=n(7227);function c(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.namespaces.CreateNamespaceRequest;\nimport io.opentdf.platform.policy.namespaces.CreateNamespaceResponse;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\nimport java.util.Objects;\n\npublic class CreateNamespace {\n\n  private static final Logger logger = LogManager.getLogger(CreateNamespace.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n    String namespaceName = "opentdf.io";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      CreateNamespaceRequest createNamespaceRequest =\n          CreateNamespaceRequest.newBuilder().setName(namespaceName).build();\n\n      CreateNamespaceResponse createNamespaceResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .namespaces()\n                  .createNamespaceBlocking(createNamespaceRequest, Collections.emptyMap())\n                  .execute());\n\n      logger.info(\n          "Successfully created namespace with ID: {}",\n          createNamespaceResponse.getNamespace().getId());\n\n    } catch (Exception e) {\n      if (Objects.equals(e.getMessage(), "resource unique field violation")) {\n        logger.error("Namespace \'{}\' already exists", namespaceName, e);\n      } else {\n        logger.error("Failed to create namespace", e);\n      }\n    }\n  }\n}\n\n'})})}function l(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}function p(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Creating a Namespace"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy/namespaces"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Create Namespace\n\tnamespace := &namespaces.CreateNamespaceRequest{\n\t\tName: "opentdf.io",\n\t}\n\n\t_, err = client.Namespaces.CreateNamespace(context.Background(), namespace)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(l,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}function d(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.Namespace;\nimport io.opentdf.platform.policy.namespaces.ListNamespacesRequest;\nimport io.opentdf.platform.policy.namespaces.ListNamespacesResponse;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class ListNamespaces {\n  private static final Logger logger = LogManager.getLogger(ListNamespaces.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      ListNamespacesRequest request = ListNamespacesRequest.newBuilder().build();\n\n      ListNamespacesResponse listNamespacesResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .namespaces()\n                  .listNamespacesBlocking(request, Collections.emptyMap())\n                  .execute());\n\n      List<Namespace> namespaces = listNamespacesResponse.getNamespacesList();\n\n      logger.info(\n          "Successfully retrieved namespaces: [{}]",\n          namespaces.stream().map(Namespace::getFqn).collect(Collectors.joining(", ")));\n    } catch (Exception e) {\n      logger.error("Failed to list namespaces", e);\n    }\n  }\n}\n\n'})})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function m(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"List Namespaces"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy/namespaces"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// List All Namespaces\n\tnamespaces, err := client.Namespaces.ListNamespaces(context.Background(), &namespaces.ListNamespacesRequest{})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfor _, namespace := range namespaces.GetNamespaces() {\n\t\tlog.Printf("Namespace: %s\\n", namespace.GetName())\n\t}\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(g,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function f(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}function b(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.AttributeRuleTypeEnum;\nimport io.opentdf.platform.policy.Namespace;\nimport io.opentdf.platform.policy.attributes.CreateAttributeRequest;\nimport io.opentdf.platform.policy.attributes.CreateAttributeResponse;\nimport io.opentdf.platform.policy.namespaces.GetNamespaceRequest;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\n\nimport java.util.Arrays;\nimport java.util.Objects;\n\npublic class CreateAttribute {\n\n  private static final Logger logger = LogManager.getLogger(CreateAttribute.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n    String namespaceName = "opentdf.io";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      Namespace namespace =\n          ResponseMessageKt.getOrThrow(\n                  sdk.getServices()\n                      .namespaces()\n                      .getNamespaceBlocking(\n                          GetNamespaceRequest.newBuilder()\n                              .setFqn("https://" + namespaceName)\n                              .build(),\n                          Collections.emptyMap())\n                      .execute())\n              .getNamespace();\n\n      CreateAttributeRequest createAttributeRequest =\n          CreateAttributeRequest.newBuilder()\n              .setNamespaceId(namespace.getId())\n              .setName("test-attribute")\n              .setRule(\n                  AttributeRuleTypeEnum.forNumber(\n                      AttributeRuleTypeEnum.ATTRIBUTE_RULE_TYPE_ENUM_ALL_OF_VALUE))\n              .addAllValues(Arrays.asList("test1", "test2"))\n              .build();\n\n      CreateAttributeResponse createAttributeResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .attributes()\n                  .createAttributeBlocking(createAttributeRequest, Collections.emptyMap())\n                  .execute());\n\n      logger.info(\n          "Successfully created attribute with ID: {}",\n          createAttributeResponse.getAttribute().getId());\n    } catch (Exception e) {\n      if (Objects.equals(e.getMessage(), "resource not found")) {\n        logger.error("Namespace \'{}\' not found", namespaceName, e);\n      } else if (Objects.equals(e.getMessage(), "resource unique field violation")) {\n        logger.error("Attribute already exists", e);\n      } else {\n        logger.error("Failed to create attribute", e);\n      }\n    }\n  }\n}\n\n'})})}function j(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(b,{...e})}):b(e)}function S(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Create Attribute"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"crypto/rand"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy"\n\t"github.com/opentdf/platform/protocol/go/policy/attributes"\n\t"github.com/opentdf/platform/protocol/go/policy/namespaces"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// List namespaces to get a namespace ID\n\tlistResponse, err := client.Namespaces.ListNamespaces(context.Background(), &namespaces.ListNamespacesRequest{})\n\tif err != nil {\n\t\tlog.Fatalf("failed to list namespaces: %s", err)\n\t}\n\n\tif len(listResponse.GetNamespaces()) == 0 {\n\t\tlog.Fatal("no namespaces found")\n\t}\n\n\tnamespaceID := listResponse.GetNamespaces()[0].GetId()\n\n\t// Create a new attribute\n\tattrRequest := &attributes.CreateAttributeRequest{\n\t\tNamespaceId: namespaceID,\n\t\tName:        "role" + "-" + rand.Text()[:4],\n\t\tRule:        policy.AttributeRuleTypeEnum_ATTRIBUTE_RULE_TYPE_ENUM_ANY_OF,\n\t\tValues:      []string{"admin", "developer", "guest"},\n\t}\n\n\tattribute, err := client.Attributes.CreateAttribute(context.Background(), attrRequest)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tlog.Printf("Created attribute: %s with ID: %s in namespace: %s\\n", attribute.GetAttribute().Name, attribute.GetAttribute().GetId(), namespaceID)\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(j,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}function x(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.Attribute;\nimport io.opentdf.platform.policy.attributes.ListAttributesRequest;\nimport io.opentdf.platform.policy.attributes.ListAttributesResponse;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class ListAttributes {\n  private static final Logger logger = LogManager.getLogger(ListAttributes.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n    String namespaceName = "opentdf.io";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      ListAttributesRequest request =\n          ListAttributesRequest.newBuilder().setNamespace(namespaceName).build();\n\n      ListAttributesResponse listAttributesResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .attributes()\n                  .listAttributesBlocking(request, Collections.emptyMap())\n                  .execute());\n\n      List<Attribute> attributes = listAttributesResponse.getAttributesList();\n\n      logger.info(\n          "Successfully retrieved attributes: [{}]",\n          attributes.stream().map(Attribute::getFqn).collect(Collectors.joining(", ")));\n    } catch (Exception e) {\n      logger.error("Failed to list attributes", e);\n    }\n  }\n}\n\n'})})}function C(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}function v(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"List Attributes"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy/attributes"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// List attributes\n\n\tattrs, err := client.Attributes.ListAttributes(context.Background(), &attributes.ListAttributesRequest{})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tfor _, attr := range attrs.GetAttributes() {\n\t\tlog.Printf("Attribute: %s, ID: %s, ", attr.GetName(), attr.GetId())\n\t\tfor _, value := range attr.Values {\n\t\t\tlog.Printf("Value: %s, ID: %s", value.GetValue(), value.GetId())\n\t\t}\n\t}\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(C,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function y(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(v,{...e})}):v(e)}function N(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.Condition;\nimport io.opentdf.platform.policy.ConditionBooleanTypeEnum;\nimport io.opentdf.platform.policy.ConditionGroup;\nimport io.opentdf.platform.policy.SubjectConditionSet;\nimport io.opentdf.platform.policy.SubjectMappingOperatorEnum;\nimport io.opentdf.platform.policy.SubjectSet;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectConditionSetRequest;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectConditionSetResponse;\nimport io.opentdf.platform.policy.subjectmapping.SubjectConditionSetCreate;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\n\npublic class CreateSubjectConditionSet {\n\n  private static final Logger logger = LogManager.getLogger(CreateSubjectConditionSet.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      SubjectSet.Builder subjectSetBuilder =\n          SubjectSet.newBuilder()\n              .addConditionGroups(\n                  ConditionGroup.newBuilder()\n                      .setBooleanOperator(ConditionBooleanTypeEnum.CONDITION_BOOLEAN_TYPE_ENUM_AND)\n                      .addConditions(\n                          Condition.newBuilder()\n                              .setSubjectExternalSelectorValue(".myfield")\n                              .setOperator(\n                                  SubjectMappingOperatorEnum.SUBJECT_MAPPING_OPERATOR_ENUM_IN)\n                              .addSubjectExternalValues("myvalue")));\n\n      CreateSubjectConditionSetRequest createSubjectConditionSetRequest =\n          CreateSubjectConditionSetRequest.newBuilder()\n              .setSubjectConditionSet(\n                  SubjectConditionSetCreate.newBuilder().addSubjectSets(subjectSetBuilder))\n              .build();\n\n      CreateSubjectConditionSetResponse createSubjectConditionSetResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .subjectMappings()\n                  .createSubjectConditionSetBlocking(\n                      createSubjectConditionSetRequest, Collections.emptyMap())\n                  .execute());\n\n      SubjectConditionSet subjectConditionSet =\n          createSubjectConditionSetResponse.getSubjectConditionSet();\n\n      logger.info(\n          "Successfully created subject condition set with ID: {}", subjectConditionSet.getId());\n\n    } catch (Exception e) {\n      logger.error("Failed to create subject condition set", e);\n    }\n  }\n}\n\n'})})}function R(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(N,{...e})}):N(e)}function E(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Create Subject Condition Set"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy"\n\t"github.com/opentdf/platform/protocol/go/policy/subjectmapping"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Create Subject Condition Set\n\n\tconditionset := &subjectmapping.CreateSubjectConditionSetRequest{\n\t\tSubjectConditionSet: &subjectmapping.SubjectConditionSetCreate{\n\t\t\tSubjectSets: []*policy.SubjectSet{\n\t\t\t\t{\n\t\t\t\t\tConditionGroups: []*policy.ConditionGroup{\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBooleanOperator: policy.ConditionBooleanTypeEnum_CONDITION_BOOLEAN_TYPE_ENUM_AND,\n\t\t\t\t\t\t\tConditions: []*policy.Condition{\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tSubjectExternalSelectorValue: ".clientId",\n\t\t\t\t\t\t\t\t\tOperator:                     policy.SubjectMappingOperatorEnum_SUBJECT_MAPPING_OPERATOR_ENUM_IN,\n\t\t\t\t\t\t\t\t\tSubjectExternalValues:        []string{"opentdf"},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}\n\n\tresp, err := client.SubjectMapping.CreateSubjectConditionSet(context.Background(), conditionset)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tlog.Printf("Created Subject Condition Set with ID: %s\\n", resp.GetSubjectConditionSet().GetId())\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(R,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function M(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(E,{...e})}):E(e)}function k(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.Action;\nimport io.opentdf.platform.policy.Attribute;\nimport io.opentdf.platform.policy.Condition;\nimport io.opentdf.platform.policy.ConditionBooleanTypeEnum;\nimport io.opentdf.platform.policy.ConditionGroup;\nimport io.opentdf.platform.policy.Namespace;\nimport io.opentdf.platform.policy.SubjectConditionSet;\nimport io.opentdf.platform.policy.SubjectMapping;\nimport io.opentdf.platform.policy.SubjectMappingOperatorEnum;\nimport io.opentdf.platform.policy.SubjectSet;\nimport io.opentdf.platform.policy.attributes.GetAttributeRequest;\nimport io.opentdf.platform.policy.namespaces.GetNamespaceRequest;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectConditionSetRequest;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectConditionSetResponse;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectMappingRequest;\nimport io.opentdf.platform.policy.subjectmapping.CreateSubjectMappingResponse;\nimport io.opentdf.platform.policy.subjectmapping.SubjectConditionSetCreate;\nimport io.opentdf.platform.sdk.SDK;\nimport io.opentdf.platform.sdk.SDKBuilder;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\nimport java.util.Objects;\n\npublic class CreateSubjectMapping {\n\n  private static final Logger logger = LogManager.getLogger(CreateSubjectMapping.class);\n\n  public static void main(String[] args) {\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n    String namespaceName = "opentdf.io";\n    String attributeName = "test-attribute";\n\n    SDKBuilder builder = new SDKBuilder();\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      Namespace namespace;\n\n      try {\n        namespace =\n            ResponseMessageKt.getOrThrow(\n                    sdk.getServices()\n                        .namespaces()\n                        .getNamespaceBlocking(\n                            GetNamespaceRequest.newBuilder()\n                                .setFqn("https://" + namespaceName)\n                                .build(),\n                            Collections.emptyMap())\n                        .execute())\n                .getNamespace();\n      } catch (Exception e) {\n        if (Objects.equals(e.getMessage(), "resource not found")) {\n          logger.error("Namespace \'{}\' not found", namespaceName, e);\n        } else {\n          logger.error("Failed to retrieve namespace \'{}\'", namespaceName, e);\n        }\n        return;\n      }\n\n      Attribute attribute;\n      String attributeFqn = namespace.getFqn() + "/attr/" + attributeName;\n\n      try {\n        GetAttributeRequest getAttributeRequest =\n            GetAttributeRequest.newBuilder().setFqn(attributeFqn).build();\n\n        attribute =\n            ResponseMessageKt.getOrThrow(\n                    sdk.getServices()\n                        .attributes()\n                        .getAttributeBlocking(getAttributeRequest, Collections.emptyMap())\n                        .execute())\n                .getAttribute();\n\n      } catch (Exception e) {\n        if (Objects.equals(e.getMessage(), "resource not found")) {\n          logger.error("Attribute \'{}\' not found", attributeFqn, e);\n        } else {\n          logger.error("Failed to retrieve attribute \'{}\'", attributeFqn, e);\n        }\n        return;\n      }\n\n      CreateSubjectConditionSetRequest subjectConditionSetRequest =\n          CreateSubjectConditionSetRequest.newBuilder()\n              .setSubjectConditionSet(\n                  SubjectConditionSetCreate.newBuilder()\n                      .addSubjectSets(\n                          SubjectSet.newBuilder()\n                              .addConditionGroups(\n                                  ConditionGroup.newBuilder()\n                                      .setBooleanOperator(\n                                          ConditionBooleanTypeEnum.CONDITION_BOOLEAN_TYPE_ENUM_AND)\n                                      .addConditions(\n                                          Condition.newBuilder()\n                                              .setSubjectExternalSelectorValue(".myfield")\n                                              .setOperator(\n                                                  SubjectMappingOperatorEnum\n                                                      .SUBJECT_MAPPING_OPERATOR_ENUM_IN)\n                                              .addSubjectExternalValues("myvalue")))))\n              .build();\n\n      CreateSubjectConditionSetResponse subjectConditionSetResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .subjectMappings()\n                  .createSubjectConditionSetBlocking(\n                      subjectConditionSetRequest, Collections.emptyMap())\n                  .execute());\n\n      SubjectConditionSet subjectConditionSet =\n          subjectConditionSetResponse.getSubjectConditionSet();\n\n      CreateSubjectMappingRequest request =\n          CreateSubjectMappingRequest.newBuilder()\n              .setAttributeValueId(attribute.getValues(0).getId())\n              .addActions(Action.newBuilder().setName("read"))\n              .setExistingSubjectConditionSetId(subjectConditionSet.getId())\n              .build();\n\n      CreateSubjectMappingResponse resp =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .subjectMappings()\n                  .createSubjectMappingBlocking(request, Collections.emptyMap())\n                  .execute());\n\n      SubjectMapping subjectMapping = resp.getSubjectMapping();\n\n      logger.info("Successfully created subject mapping with ID: {}", subjectMapping.getId());\n    } catch (Exception e) {\n      logger.error("Failed to create subject mapping", e);\n    }\n  }\n}\n\n'})})}function w(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(k,{...e})}):k(e)}function A(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Create Subject Mapping"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy"\n\t"github.com/opentdf/platform/protocol/go/policy/subjectmapping"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Create Subject Mapping\n\tsubjectMapping := &subjectmapping.CreateSubjectMappingRequest{\n\t\tAttributeValueId: "224c9d29-2cd4-4a38-b6ad-5f025ca93a8c",\n\t\tActions: []*policy.Action{\n\t\t\t{\n\t\t\t\tValue: &policy.Action_Standard{\n\t\t\t\t\tStandard: policy.Action_STANDARD_ACTION_DECRYPT,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tExistingSubjectConditionSetId: "890b26db-4ee4-447f-ae8a-2862d922eeef",\n\t}\n\n\t_, err = client.SubjectMapping.CreateSubjectMapping(context.Background(), subjectMapping)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n}\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(w,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function L(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(A,{...e})}):A(e)}function I(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package io.opentdf.platform;\n\nimport com.connectrpc.ResponseMessageKt;\nimport io.opentdf.platform.policy.SubjectMapping;\nimport io.opentdf.platform.policy.subjectmapping.ListSubjectMappingsRequest;\nimport io.opentdf.platform.policy.subjectmapping.ListSubjectMappingsResponse;\nimport io.opentdf.platform.sdk.*;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport java.util.Collections;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class ListSubjectMappings {\n  private static final Logger logger = LogManager.getLogger(ListSubjectMappings.class);\n\n  public static void main(String[] args) {\n\n    String clientId = "opentdf";\n    String clientSecret = "secret";\n    String platformEndpoint = "localhost:8080";\n\n    SDKBuilder builder = new SDKBuilder();\n\n    try (SDK sdk =\n        builder\n            .platformEndpoint(platformEndpoint)\n            .clientSecret(clientId, clientSecret)\n            .useInsecurePlaintextConnection(true)\n            .build()) {\n\n      ListSubjectMappingsRequest listSubjectMappingsRequest =\n          ListSubjectMappingsRequest.newBuilder().build();\n\n      ListSubjectMappingsResponse listSubjectMappingsResponse =\n          ResponseMessageKt.getOrThrow(\n              sdk.getServices()\n                  .subjectMappings()\n                  .listSubjectMappingsBlocking(listSubjectMappingsRequest, Collections.emptyMap())\n                  .execute());\n\n      List<SubjectMapping> subjectMappings = listSubjectMappingsResponse.getSubjectMappingsList();\n\n      logger.info(\n          "Successfully retrieved subject mappings: [{}]",\n          subjectMappings.stream().map(SubjectMapping::getId).collect(Collectors.joining(", ")));\n    } catch (Exception e) {\n      logger.error("Failed to list subject mappings", e);\n    }\n  }\n}\n\n'})})}function q(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(I,{...e})}):I(e)}function B(e){const t={code:"code",pre:"pre",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"List Subject Mappings"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(s.default,{value:"go",label:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\n\t"github.com/opentdf/platform/protocol/go/policy/subjectmapping"\n\t"github.com/opentdf/platform/sdk"\n)\n\nfunc main() {\n\n\tplatformEndpoint := "http://localhost:8080"\n\n\t// Create a new client\n\tclient, err := sdk.New(\n\t\tplatformEndpoint,\n\t\tsdk.WithClientCredentials("opentdf", "secret", nil),\n\t)\n\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// List Subject Mapping\n\n\tsubjectmappings, err := client.SubjectMapping.ListSubjectMappings(context.Background(), &subjectmapping.ListSubjectMappingsRequest{})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tfor _, sm := range subjectmappings.GetSubjectMappings() {\n\t\tlog.Printf("Subject Mapping: %s", sm.GetId())\n\t}\n}\n\n'})})}),(0,r.jsx)(s.default,{value:"java",label:"Java",children:(0,r.jsx)(q,{})}),(0,r.jsx)(s.default,{value:"js",label:"Javascript",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript"})})})]})]})}function D(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(B,{...e})}):B(e)}const T={sidebar_position:3},_="Managing Policy",O={},G=[...[],...[],...[],...[],...[],...[],...[]];function K(e){const t={h1:"h1",header:"header",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"managing-policy",children:"Managing Policy"})}),"\n",(0,r.jsx)(u,{}),"\n",(0,r.jsx)(f,{}),"\n",(0,r.jsx)(h,{}),"\n",(0,r.jsx)(y,{}),"\n",(0,r.jsx)(M,{}),"\n",(0,r.jsx)(L,{}),"\n",(0,r.jsx)(D,{})]})}function F(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(K,{...e})}):K(e)}},7227:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(96540);var o=n(34164);const r={tabItem:"tabItem_Ymn6"};var a=n(74848);function i({children:e,hidden:t,className:n}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,n),hidden:t,children:e})}},45645:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(96540),r=n(34164),a=n(24245),i=n(8626),s=n(11062);const c={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var l=n(74848);function p({className:e,block:t,selectedValue:n,selectValue:o,tabValues:i}){const s=[],{blockElementScrollPositionUntilNextRender:p}=(0,a.a_)(),u=e=>{const t=e.currentTarget,r=s.indexOf(t),a=i[r].value;a!==n&&(p(t),o(a))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,l.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:i.map((({value:e,label:t,attributes:o})=>(0,l.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:u,...o,className:(0,r.A)("tabs__item",c.tabItem,o?.className,{"tabs__item--active":n===e}),children:t??e},e)))})}function u({lazy:e,children:t,selectedValue:n}){const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===n));return e?(0,o.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,l.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function d(e){const t=(0,i.u)(e);return(0,l.jsxs)("div",{className:(0,r.A)("tabs-container",c.tabList),children:[(0,l.jsx)(p,{...t,...e}),(0,l.jsx)(u,{...t,...e})]})}function g(e){const t=(0,s.default)();return(0,l.jsx)(d,{...e,children:(0,i.v)(e.children)},String(t))}},8626:(e,t,n)=>{n.d(t,{u:()=>g,v:()=>l});var o=n(96540),r=n(56347),a=n(36494),i=n(62814),s=n(45167),c=n(69900);function l(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??function(e){return l(e).map((({props:{value:e,label:t,attributes:n,default:o}})=>({value:e,label:t,attributes:n,default:o})))}(n);return function(e){const t=(0,s.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function u({value:e,tabValues:t}){return t.some((t=>t.value===e))}function d({queryString:e=!1,groupId:t}){const n=(0,r.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,i.aZ)(a),(0,o.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})}),[a,n])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,i=p(e),[s,l]=(0,o.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:i}))),[g,m]=d({queryString:n,groupId:r}),[f,b]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,c.Dv)(t);return[n,(0,o.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:r}),j=(()=>{const e=g??f;return u({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{j&&l(j)}),[j]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!u({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),m(e),b(e)}),[m,b,i]),tabValues:i}}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var o=n(96540);const r={},a=o.createContext(r);function i(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);