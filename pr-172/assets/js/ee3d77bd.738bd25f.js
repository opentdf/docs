"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2696],{35451:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"components/cli/policy/subject-mappings/match","title":"otdfctl policy subject-mappings match","description":"This tool queries platform policies for relevant Subject Mappings using either an Entity Representation or specific selectors.","source":"@site/docs/components/cli/policy/subject-mappings/match.mdx","sourceDirName":"components/cli/policy/subject-mappings","slug":"/components/cli/policy/subject-mappings/match","permalink":"/pr-172/components/cli/policy/subject-mappings/match","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"otdfctl policy subject-mappings match"},"sidebar":"tutorialSidebar","previous":{"title":"otdfctl policy subject-mappings list","permalink":"/pr-172/components/cli/policy/subject-mappings/list"},"next":{"title":"otdfctl policy subject-mappings update","permalink":"/pr-172/components/cli/policy/subject-mappings/update"}}');var r=s(74848),i=s(28453),o=(s(96540),s(68818));const c={title:"otdfctl policy subject-mappings match"},a=void 0,l={},d=[{value:"Examples",id:"examples",level:2}];function p(e){const t={blockquote:"blockquote",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(o.A,{...JSON.parse('{"title":"Match a subject or set of selectors to relevant subject mappings","command":{"name":"match","flags":[{"name":"subject","shorthand":"s","description":"A Subject Entity Representation string (JSON or JWT, auto-detected)","default":""},{"name":"selector","shorthand":"x","description":"Individual selectors (i.e. \'.department\' or \'.realm_access.roles[]\') that may be found in SubjectConditionSets"}]},"fullCommand":"otdfctl policy subject-mappings match"}'),children:[(0,r.jsx)(t.p,{children:"This tool queries platform policies for relevant Subject Mappings using either an Entity Representation or specific selectors."}),(0,r.jsxs)(t.p,{children:["If an Entity Representation is provided via ",(0,r.jsx)(t.code,{children:"--subject"})," (such as an OIDC JWT or JSON response from an Entity Resolution Service), the tool\nparses all valid selectors and checks for matching Subject Condition Sets in Subject Mappings to Attribute Values."]}),(0,r.jsxs)(t.p,{children:["If selectors are provided directly with ",(0,r.jsx)(t.code,{children:"--selector"}),", the tool searches for Subject Mappings with Subject Condition Sets that contain those selectors."]}),(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),(0,r.jsxs)(t.p,{children:["Various ways to invoke the ",(0,r.jsx)(t.code,{children:"match"})," command to query Subject Mappings to Attribute Values with relevant Subject Condition Sets."]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# matches either org name or department selectors\notdfctl policy subject-mappings match --selector '.org.name' --selector '.department'\n\n# parses subject entity representation as JSON and matches any selector (with this subject only '.emailAddress')\notdfctl policy subject-mappings match --subject '{\"emailAddress\":\"user@email.com\"}'\n\n# parses entity representation as JWT into all possicle claim selectors and matches any of them\notdfctl policy subject-mappings match --subject 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c'\n"})}),(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["[!NOTE]\nThe values of the selectors and any ",(0,r.jsx)(t.code,{children:"IN"}),"/",(0,r.jsx)(t.code,{children:"NOT_IN"}),"/",(0,r.jsx)(t.code,{children:"IN_CONTAINS"})," logic of Subject Condition Sets is irrelevant to this command.\nEvaluation of any matched conditions is handled by the Authorization Service to determine entitlements. This command\nis specifically for management of policy - to facilitate lookup of current conditions driven by known selectors as a\nprecondition for administration of entitlement given the logical ",(0,r.jsx)(t.em,{children:"operators"})," of the matched conditions and their relations."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},68818:(e,t,s)=>{s.d(t,{A:()=>h});var n=s(96540);const r=(0,n.createContext)(null),i={didCatch:!1,error:null};class o extends n.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,s,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=(s=this.props).onReset)||void 0===t||t.call(s,{args:r,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,t){var s,n;null===(s=(n=this.props).onError)||void 0===s||s.call(n,e,t)}componentDidUpdate(e,t){const{didCatch:s}=this.state,{resetKeys:n}=this.props;var r,o;s&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,s)=>!Object.is(e,t[s])))}(e.resetKeys,n)&&(null===(r=(o=this.props).onReset)||void 0===r||r.call(o,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(i))}render(){const{children:e,fallbackRender:t,FallbackComponent:s,fallback:i}=this.props,{didCatch:o,error:c}=this.state;let a=e;if(o){const e={error:c,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)a=t(e);else if(s)a=(0,n.createElement)(s,e);else{if(void 0===i)throw c;a=i}}return(0,n.createElement)(r.Provider,{value:{didCatch:o,error:c,resetErrorBoundary:this.resetErrorBoundary}},a)}}var c=s(74848);function a({name:e,shorthand:t,description:s,default:n,required:r}){const i=(0,c.jsxs)("code",{children:["--",e," <",e,">"]}),o=t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("code",{children:["-",t]}),","]});return(0,c.jsxs)("dl",{children:[(0,c.jsxs)("dt",{children:[o," ",i]}),(0,c.jsxs)("dd",{children:[s,"\xa0(",(0,c.jsx)("em",{children:"required"}),": ",(0,c.jsx)("code",{children:r?"true":"false"}),")",n&&(0,c.jsxs)(c.Fragment,{children:["\xa0(",(0,c.jsx)("em",{children:"default"}),": ",(0,c.jsx)("code",{children:n}),")"]})]})]})}function l(e){return e?(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Options"}),e?.map((e=>(0,c.jsx)(a,{...e})))]}):null}function d(e){return e?(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Aliases"}),e?.map(((t,s)=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("code",{children:t}),s<e.length-1&&", "]})))]}):null}function p({children:e,fullCommand:t,title:s,command:n}){console.log(n);const{flags:r,args:i,arbitrary_args:o,aliases:a,hidden:p}=n;let h=t;return r&&(h+=" [flags]"),i&&(h+=" "+i.map((e=>`<${e}>`)).join(" ")),o&&(h+=" "+o.map((e=>`[${e}]`)).join(" ")),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("p",{children:[n.name," - ",s]})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Synopsis"}),(0,c.jsx)("pre",{children:(0,c.jsx)("code",{children:h})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Description"}),e]}),l(r),d(a)]})}function h({children:e,...t}){return(0,c.jsx)(o,{fallback:({error:e,tryAgain:t})=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{children:["This component crashed because of error: ",e.message,"."]}),(0,c.jsx)("button",{onClick:t,children:"Try Again!"})]}),children:(0,c.jsx)(p,{...t,children:e})})}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>c});var n=s(96540);const r={},i=n.createContext(r);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);