"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7605],{55713:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"components/cli/decrypt/index","title":"otdfctl decrypt","description":"Decrypt a Trusted Data Format (TDF) file and output the contents to stdout or a file in the current working directory.","source":"@site/docs/components/cli/decrypt/index.mdx","sourceDirName":"components/cli/decrypt","slug":"/components/cli/decrypt/","permalink":"/pr-172/components/cli/decrypt/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"otdfctl decrypt"},"sidebar":"tutorialSidebar","previous":{"title":"otdfctl config output","permalink":"/pr-172/components/cli/config/output"},"next":{"title":"otdfctl dev design-system","permalink":"/pr-172/components/cli/dev/design-system"}}');var n=r(74848),i=r(28453),o=(r(96540),r(68818));const l={title:"otdfctl decrypt"},a=void 0,c={},d=[{value:"Examples",id:"examples",level:2},{value:"Session Key Algorithm -- EXPERIMENTAL",id:"session-key-algorithm----experimental",level:2},{value:"ZTDF Assertion Verification (experimental)",id:"ztdf-assertion-verification-experimental",level:3}];function h(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(o.A,{...JSON.parse('{"title":"Decrypt a TDF file","command":{"name":"decrypt [file]","flags":[{"name":"out","shorthand":"o","description":"The file destination for decrypted content to be written instead of stdout.","default":""},{"name":"tdf-type","shorthand":"t","description":"Deprecated. TDF type is now auto-detected."},{"name":"no-verify-assertions","description":"disable verification of assertions","default":false},{"name":"session-key-algorithm","description":"EXPERIMENTAL: The type of session key algorithm to use for decryption\\n","enum":["rsa:2048","ec:secp256r1","ec:secp384r1","ec:secp521r1"],"default":"rsa:2048"},{"name":"with-assertion-verification-keys","description":"EXPERIMENTAL: path to JSON file of keys to verify signed assertions. See examples for more information.\\n"},{"name":"kas-allowlist","description":"A custom allowlist of comma-separated KAS Urls, e.g. `https://example.com/kas,http://localhost:8080`. If none specified, the platform will use the list of KASes in the KAS registry. To ignore the allowlist, use a quoted wildcard e.g. `--kas-allowlist \'*\'` **WARNING:** Bypassing the allowlist may expose you to potential security risks, as untrusted KAS URLs could be used."}]},"fullCommand":"otdfctl decrypt"}'),children:[(0,n.jsx)(t.p,{children:"Decrypt a Trusted Data Format (TDF) file and output the contents to stdout or a file in the current working directory."}),(0,n.jsx)(t.p,{children:"The first argument is the TDF file with path from the current working directory being decrypted."}),(0,n.jsx)(t.h2,{id:"examples",children:"Examples"}),(0,n.jsx)(t.p,{children:"Various ways to decrypt a TDF file"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"# decrypt file and write to standard output\notdfctl decrypt hello.txt.tdf\n\n# decrypt file and write to hello.txt file\notdfctl decrypt hello.txt.tdf -o hello.txt\n\n# decrypt piped TDF content and write to hello.txt file\ncat hello.txt.tdf | otdfctl decrypt -o hello.txt\n"})}),(0,n.jsx)(t.p,{children:"Advanced piping is supported"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:'$ echo "hello world" | otdfctl encrypt | otdfctl decrypt | cat\nhello world\n'})}),(0,n.jsx)(t.h2,{id:"session-key-algorithm----experimental",children:"Session Key Algorithm -- EXPERIMENTAL"}),(0,n.jsx)(t.p,{children:"The session-key-algorithm specifies the algorithm to use for the session key. The available options are (default: rsa:2048):"}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"rsa:2048"}),"\n",(0,n.jsxs)(t.li,{children:["ec",":secp256r1"]}),"\n",(0,n.jsxs)(t.li,{children:["ec",":secp384r1"]}),"\n",(0,n.jsxs)(t.li,{children:["ec",":secp521r1"]}),"\n"]}),(0,n.jsx)(t.p,{children:"Example"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"# Decrypt a file using the ec:secp256r1 algorithm for the session key\n# EXPERIMENTAL\notdfctl decrypt hello.txt --session-key-algorithm ec:secp256r1\n"})}),(0,n.jsx)(t.h3,{id:"ztdf-assertion-verification-experimental",children:"ZTDF Assertion Verification (experimental)"}),(0,n.jsx)(t.p,{children:"To verify the signed assertions (metadata bound to the TDF), you can provide verification keys. The supported assertion signing algorithms are HS256 and RS256 so the keys provided should either be an HS256 key or a public RS256 key."}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"# decrypt file and write to standard output\notdfctl decrypt hello.txt.tdf --with-assertion-verification-keys my_assertion_verification_keys.json\n"})}),(0,n.jsx)(t.p,{children:"Where my_assertion_verification_keys.json looks like:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"keys":{"assertion1":{ "alg":"HS256","key":"k0cn4xBcY+49z5gs4OHUs/kbQ3/T8p+uUW9pIQ/9aqE="},"assertion2":{ "alg":"RS256","key":"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCsgKCAQEAmr0wRsdXN0O9NiltxoGy\\nC6ZYwHbdiPVzvOnm9ven5g7Fpm3HOmygdi021WX1OlSua+OSrXGPjM2xbY3LTrFH\\nQXQEITjraXQRp5vlKDbBnOrtjYDaKazBXgTYVdelE4AIAuQaGoTudMasHBGiLPEW\\niTL4ySec0NzHn2s72Q4hn5/KJpIJOGqj0SlNViufdNylkjrJ3apoYFv1Mhwi3EF/\\niFZQ5encDDJmcG/UYF3msbuHRzArJJQ733BNRvicWF/nqixKxprvm8Ts8a54tr8N\\nZ7cEu1u5G6AY/pZFGk4ml8q3v5o1ja7xw2dgpJlS8Tl88tUzs+7GG8Ib8n7mHqeP\\nTQIDAQAB\\n-----END PUBLIC KEY-----\\n"}}}\n'})}),(0,n.jsx)(t.p,{children:"If no verification keys are provided, the SDK will default to verifying using the payload key. If the assertions were not signed with the payload key, the decrypt call will fail."})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},68818:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(96540);const n=(0,s.createContext)(null),i={didCatch:!1,error:null};class o extends s.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,r,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:n,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,t){var r,s;null===(r=(s=this.props).onError)||void 0===r||r.call(s,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:s}=this.props;var n,o;r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,r)=>!Object.is(e,t[r])))}(e.resetKeys,s)&&(null===(n=(o=this.props).onReset)||void 0===n||n.call(o,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(i))}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:l}=this.state;let a=e;if(o){const e={error:l,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)a=t(e);else if(r)a=(0,s.createElement)(r,e);else{if(void 0===i)throw l;a=i}}return(0,s.createElement)(n.Provider,{value:{didCatch:o,error:l,resetErrorBoundary:this.resetErrorBoundary}},a)}}var l=r(74848);function a({name:e,shorthand:t,description:r,default:s,required:n}){const i=(0,l.jsxs)("code",{children:["--",e," <",e,">"]}),o=t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("code",{children:["-",t]}),","]});return(0,l.jsxs)("dl",{children:[(0,l.jsxs)("dt",{children:[o," ",i]}),(0,l.jsxs)("dd",{children:[r,"\xa0(",(0,l.jsx)("em",{children:"required"}),": ",(0,l.jsx)("code",{children:n?"true":"false"}),")",s&&(0,l.jsxs)(l.Fragment,{children:["\xa0(",(0,l.jsx)("em",{children:"default"}),": ",(0,l.jsx)("code",{children:s}),")"]})]})]})}function c(e){return e?(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Options"}),e?.map((e=>(0,l.jsx)(a,{...e})))]}):null}function d(e){return e?(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Aliases"}),e?.map(((t,r)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("code",{children:t}),r<e.length-1&&", "]})))]}):null}function h({children:e,fullCommand:t,title:r,command:s}){console.log(s);const{flags:n,args:i,arbitrary_args:o,aliases:a,hidden:h}=s;let p=t;return n&&(p+=" [flags]"),i&&(p+=" "+i.map((e=>`<${e}>`)).join(" ")),o&&(p+=" "+o.map((e=>`[${e}]`)).join(" ")),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:[s.name," - ",r]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Synopsis"}),(0,l.jsx)("pre",{children:(0,l.jsx)("code",{children:p})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Description"}),e]}),c(n),d(a)]})}function p({children:e,...t}){return(0,l.jsx)(o,{fallback:({error:e,tryAgain:t})=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:["This component crashed because of error: ",e.message,"."]}),(0,l.jsx)("button",{onClick:t,children:"Try Again!"})]}),children:(0,l.jsx)(h,{...t,children:e})})}},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>l});var s=r(96540);const n={},i=s.createContext(n);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);