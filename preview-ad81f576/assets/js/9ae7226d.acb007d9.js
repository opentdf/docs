"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8715],{37068:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"components/core/authz","title":"Authorization Configuration","description":"Learn about the standard authorization (AuthZ) configuration and role-based access control in the OpenTDF platform","source":"@site/docs/components/core/authz.md","sourceDirName":"components/core","slug":"/components/core/authz","permalink":"/preview-ad81f576/components/core/authz","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Authorization Configuration","description":"Learn about the standard authorization (AuthZ) configuration and role-based access control in the OpenTDF platform","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Core Components","permalink":"/preview-ad81f576/components/core/"},"next":{"title":"Policy","permalink":"/preview-ad81f576/components/policy"}}');var o=i(74848),r=i(28453);const t={title:"Authorization Configuration",description:"Learn about the standard authorization (AuthZ) configuration and role-based access control in the OpenTDF platform",sidebar_position:2},l="Standard Authorization (AuthZ) Configuration for opentdf Platform",a={},d=[{value:"Default Authorization Roles and Policies",id:"default-authorization-roles-and-policies",level:2},{value:"Role Mappings and Their Permissions",id:"role-mappings-and-their-permissions",level:3},{value:"Public Endpoints",id:"public-endpoints",level:3},{value:"Responsibilities of Administrators",id:"responsibilities-of-administrators",level:2},{value:"Default Casbin Policy",id:"default-casbin-policy",level:2},{value:"Default Role Mapping",id:"default-role-mapping",level:3},{value:"Casbin Access Control Model",id:"casbin-access-control-model",level:3},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"standard-authorization-authz-configuration-for-opentdf-platform",children:"Standard Authorization (AuthZ) Configuration for opentdf Platform"})}),"\n",(0,o.jsxs)(e.p,{children:["The opentdf platform uses ",(0,o.jsx)(e.strong,{children:"Casbin"})," to manage authorization (AuthZ) for its routes, which are defined using ",(0,o.jsx)(e.strong,{children:"ConnectRPC"}),". This document outlines the standard AuthZ configuration, role mappings, and administrative responsibilities for managing and customizing the platform to meet specific security requirements."]}),"\n",(0,o.jsx)(e.h2,{id:"default-authorization-roles-and-policies",children:"Default Authorization Roles and Policies"}),"\n",(0,o.jsxs)(e.p,{children:["By default, the platform provides three role mappings (",(0,o.jsx)(e.code,{children:"admin"}),", ",(0,o.jsx)(e.code,{children:"standard"}),", and ",(0,o.jsx)(e.code,{children:"unknown"}),") and a concept of ",(0,o.jsx)(e.strong,{children:"public endpoints"}),". These roles are tied to the ",(0,o.jsx)(e.code,{children:"realmsRole"})," claim of the OIDC token issued by the Keycloak Identity Provider."]}),"\n",(0,o.jsx)(e.h3,{id:"role-mappings-and-their-permissions",children:"Role Mappings and Their Permissions"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.code,{children:"admin"})})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Description"}),": Administrators of the platform."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Permissions"}),":","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Perform all actions."}),"\n",(0,o.jsx)(e.li,{children:"Modify and mutate policy data."}),"\n",(0,o.jsx)(e.li,{children:"Access private and public endpoints."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Requirements"}),": Must have a valid OIDC token with a claim mapping to the ",(0,o.jsx)(e.code,{children:"admin"})," role."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.code,{children:"standard"})})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Description"}),": Standard users of the platform."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Permissions"}),":","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Perform basic actions."}),"\n",(0,o.jsx)(e.li,{children:"Cannot modify policy data."}),"\n",(0,o.jsx)(e.li,{children:"Access private and public endpoints."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Requirements"}),": Must have a valid OIDC token with a claim mapping to the ",(0,o.jsx)(e.code,{children:"standard"})," role."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.code,{children:"unknown"})})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Description"}),": Users with valid OIDC tokens who are not mappable into the platform's predefined roles."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Permissions"}),":","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Can only perform public functions."}),"\n",(0,o.jsx)(e.li,{children:"Cannot access private endpoints."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Requirements"}),": Must have a valid OIDC token, but no mapping exists for the ",(0,o.jsx)(e.code,{children:"realmsRole"})," claim."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"public-endpoints",children:"Public Endpoints"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Description"}),": Certain routes are designated as public endpoints and ",(0,o.jsx)(e.strong,{children:"bypass AuthZ entirely"}),"."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Use Case"}),": These routes are accessible to all users, regardless of their role or token validity."]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"responsibilities-of-administrators",children:"Responsibilities of Administrators"}),"\n",(0,o.jsxs)(e.p,{children:["It is critical to note that the opentdf platform provides a ",(0,o.jsx)(e.strong,{children:"basic configuration"})," for authorization. Administrators are fully responsible for customizing and managing authorization policies to align with their organization's security posture. This includes:"]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Configuring the Platform for Security Posture"}),":"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Review and customize the default Casbin policy to meet organizational needs."}),"\n",(0,o.jsx)(e.li,{children:"Ensure that sensitive routes are properly protected."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Managing Role Mappings"}),":"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Update and maintain the mappings for the ",(0,o.jsx)(e.code,{children:"realmsRole"})," claim in Keycloak to ensure accurate role assignment."]}),"\n",(0,o.jsxs)(e.li,{children:["Ensure that users are correctly categorized into ",(0,o.jsx)(e.code,{children:"admin"}),", ",(0,o.jsx)(e.code,{children:"standard"}),", or custom roles as required."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Monitoring and Updating Policies"}),":"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Regularly review policy files to ensure compliance with evolving security requirements."}),"\n",(0,o.jsx)(e.li,{children:"Keep track of updates and changes in the Casbin model and policy files."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"default-casbin-policy",children:"Default Casbin Policy"}),"\n",(0,o.jsx)(e.p,{children:"The platform leverages Casbin to enforce role-based access control (RBAC). Below is an outline of the default policy:"}),"\n",(0,o.jsx)(e.h3,{id:"default-role-mapping",children:"Default Role Mapping"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"admin"})," \u2192 Full permissions to all resources and actions."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"standard"})," \u2192 Limited permissions to basic resources and actions."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"unknown"})," \u2192 Only permitted to access public functions."]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"casbin-access-control-model",children:"Casbin Access Control Model"}),"\n",(0,o.jsxs)(e.p,{children:["The Casbin model supports ",(0,o.jsx)(e.strong,{children:"extensibility"})," so that administrators can define custom access control logic to meet their specific needs. For example, administrators can override the default policy using custom mapping logic or additional claims."]}),"\n",(0,o.jsx)(e.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,o.jsxs)(e.p,{children:["Here is an example of how the ",(0,o.jsx)(e.code,{children:"realmsRole"})," claim in Keycloak maps to Casbin roles:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"server:\n  auth:\n    policy:\n      csv: |\n        p, role:admin, *, *, allow\n        p, role:standard, /basic/*, GET|POST, allow\n        p, role:unknown, /public/*, GET, allow\n        g, opentdf-admin, role:admin\n        g, opentdf-standard, role:standard\n"})}),"\n",(0,o.jsx)(e.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"The opentdf platform provides a basic AuthZ configuration as a starting point."}),"\n",(0,o.jsx)(e.li,{children:"Administrators are responsible for ensuring the platform's configuration aligns with their security policies."}),"\n",(0,o.jsxs)(e.li,{children:["It is the organization's responsibility to manage role mappings and to ensure that the ",(0,o.jsx)(e.code,{children:"realmsRole"})," claim in Keycloak is configured correctly."]}),"\n",(0,o.jsxs)(e.li,{children:["By default, ",(0,o.jsx)(e.code,{children:"admin"}),", ",(0,o.jsx)(e.code,{children:"standard"}),", and ",(0,o.jsx)(e.code,{children:"unknown"})," roles are provided, with respective permissions. Public endpoints bypass AuthZ entirely."]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["For more advanced configurations, refer to the ",(0,o.jsx)(e.a,{href:"https://casbin.org/docs/syntax-for-models",children:"Casbin documentation"})," for guidance on customizing policies and models."]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>l});var s=i(96540);const o={},r=s.createContext(o);function t(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:t(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);