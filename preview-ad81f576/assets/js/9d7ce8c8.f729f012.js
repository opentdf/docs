"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9732],{90904:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"components/cli/policy/kas-grants/index","title":"otdfctl policy kas-grants","description":"Once Key Access Servers (KASs) have been registered within a platform\'s policy,","source":"@site/docs/components/cli/policy/kas-grants/index.mdx","sourceDirName":"components/cli/policy/kas-grants","slug":"/components/cli/policy/kas-grants/","permalink":"/preview-ad81f576/components/cli/policy/kas-grants/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"otdfctl policy kas-grants"},"sidebar":"tutorialSidebar","previous":{"title":"otdfctl policy attributes values update","permalink":"/preview-ad81f576/components/cli/policy/attributes/values/update"},"next":{"title":"otdfctl policy kas-grants assign","permalink":"/preview-ad81f576/components/cli/policy/kas-grants/assign"}}');var i=n(74848),r=n(28453),d=(n(96540),n(68818));const l={title:"otdfctl policy kas-grants"},c="Deprecated",a={},o=[{value:"Utilization",id:"utilization",level:2},{value:"Specificity",id:"specificity",level:2},{value:"Split Scenarios",id:"split-scenarios",level:2},{value:"AnyOf Split",id:"anyof-split",level:3},{value:"AllOf Split",id:"allof-split",level:3}];function h(e){const t={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(d.A,{...JSON.parse('{"title":"(Deprecated) Manage Key Access Server grants","command":{"name":"kas-grants","aliases":["kasg","kas-grant"]},"fullCommand":"otdfctl policy kas-grants"}'),children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"deprecated",children:"Deprecated"})}),(0,i.jsx)(t.p,{children:"Once Key Access Servers (KASs) have been registered within a platform's policy,\nthey can be assigned grants to various attribute objects (namespaces, definitions, values)."}),(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.code,{children:"kas-registry"})," command within ",(0,i.jsx)(t.code,{children:"policy"})," to manage the KASs known to the platform."]}),"\n"]}),(0,i.jsx)(t.p,{children:"Key Access Grants are associations between a registered KAS (see KAS Registry docs) and an Attribute."}),(0,i.jsx)(t.p,{children:"An attribute can be assigned a KAS Grant on its namespace, its definition, or any one of its values."}),(0,i.jsx)(t.p,{children:"Grants enable key split behaviors on TDFs with attributes, which can be useful for various collaboration scenarios around shared policy."}),(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"[!WARNING]\nKAS Grants are considered experimental, as grants to namespaces are not fully utilized within encrypt/decrypt flows at present."}),"\n"]}),(0,i.jsx)(t.h2,{id:"utilization",children:"Utilization"}),(0,i.jsx)(t.p,{children:"The steps below are driven by the SDK on encrypt, and they are the same steps followed\non decrypt by a KAS making a decision request on a key release (once the decision\nis found to be permissible):"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"look up the attributes on the TDF within the platform"}),"\n",(0,i.jsx)(t.li,{children:"find any associated grants for those attributes' values, definitions, namespaces"}),"\n",(0,i.jsx)(t.li,{children:"retrieve the public key of each KAS granted to those attribute objects"}),"\n",(0,i.jsx)(t.li,{children:"determine based on the specificity matrix below which keys to utilize in splits"}),"\n"]}),(0,i.jsx)(t.h2,{id:"specificity",children:"Specificity"}),(0,i.jsx)(t.p,{children:"When KAS grants are considered, they follow a most-to-least specificity matrix. Grants to\nAttribute Values supersede any grants to Definitions which also supersede any grants to a Namespace."}),(0,i.jsx)(t.p,{children:"Grants to Attribute Objects:"}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Namespace Grant"}),(0,i.jsx)(t.th,{children:"Attr Definition Grant"}),(0,i.jsx)(t.th,{children:"Attr Value Grant"}),(0,i.jsx)(t.th,{children:"Data Encryption Key Utilized"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"namespace"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"attr definition"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"attr definition"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"value"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"value"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"yes"}),(0,i.jsx)(t.td,{children:"value"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"no"}),(0,i.jsx)(t.td,{children:"default KAS/platform key"})]})]})]}),(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"[!NOTE]\nA namespace grant may soon be required with deprecation of a default KAS/platform key."}),"\n"]}),(0,i.jsx)(t.h2,{id:"split-scenarios",children:"Split Scenarios"}),(0,i.jsx)(t.h3,{id:"anyof-split",children:"AnyOf Split"}),(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Bob"})," and ",(0,i.jsx)(t.code,{children:"Alice"})," want to share data equally, but maintain their ability to decrypt the data without sharing each other\u2019s private keys."]}),(0,i.jsx)(t.p,{children:"With KAS Grants, they can define a key split where the shared data is wrapped with both of their public keys and AnyOf logic, meaning that each partner could decrypt the data with just one of those keys."}),(0,i.jsxs)(t.p,{children:["If ",(0,i.jsx)(t.code,{children:"Bob"})," assigns a grant between Bob's running/registered KAS to a known attribute value, and ",(0,i.jsx)(t.code,{children:"Alice"})," defines a grant of Alice's running/registered KAS to the same attribute value,\nany data encrypted in a TDF will be decryptable with a key released by ",(0,i.jsx)(t.em,{children:"either"})," of their Key Access Servers."]}),(0,i.jsxs)(t.p,{children:["Attribute A: ",(0,i.jsx)(t.code,{children:"https://conglomerate.com/attr/organization/value/acmeco"})]}),(0,i.jsxs)(t.p,{children:["Attribute B: ",(0,i.jsx)(t.code,{children:"https://conglomerate.com/attr/organization/value/example_inc"})]}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Attribute"}),(0,i.jsx)(t.th,{children:"Namespace"}),(0,i.jsx)(t.th,{children:"Definition"}),(0,i.jsx)(t.th,{children:"Value"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"A"}),(0,i.jsx)(t.td,{children:"conglomerate.com"}),(0,i.jsx)(t.td,{children:"organization"}),(0,i.jsx)(t.td,{children:"acmeco"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"B"}),(0,i.jsx)(t.td,{children:"conglomerate.com"}),(0,i.jsx)(t.td,{children:"organization"}),(0,i.jsx)(t.td,{children:"example_inc"})]})]})]}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Attribute KAS Grant Scenarios"})}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Bob & Alice represent individual KAS Grants to attributes on TDF'd data"}),"\n",(0,i.jsxs)(t.li,{children:["Note that the attributes A and B are of ",(0,i.jsx)(t.em,{children:"the same definition and namespace"})]}),"\n"]}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Definition: organization"}),(0,i.jsx)(t.th,{children:"Value: acmeco"}),(0,i.jsx)(t.th,{children:"Value: example_inc"}),(0,i.jsx)(t.th,{children:"Split"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Bob, Alice"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"OR"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Bob, Alice"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"OR"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Bob, Alice"}),(0,i.jsx)(t.td,{children:"OR"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Bob"}),(0,i.jsx)(t.td,{children:"Alice"}),(0,i.jsx)(t.td,{children:"OR"})]})]})]}),(0,i.jsx)(t.h3,{id:"allof-split",children:"AllOf Split"}),(0,i.jsxs)(t.p,{children:["Unlike the ",(0,i.jsx)(t.code,{children:"AnyOf"})," split above, this time ",(0,i.jsx)(t.code,{children:"Bob"})," and ",(0,i.jsx)(t.code,{children:"Alice"})," want to make sure ",(0,i.jsx)(t.em,{children:"both"})," of their keys must be granted for data in a TDF\nto be decrypted. With KAS Grants, they can define a key split where the shared data is wrapped with both of their public keys and\nAllOf logic, meaning that neither partner can decrypt the data with just one of those keys."]}),(0,i.jsx)(t.p,{children:"To accomplish this, they each define KAS Grants between their KASes and policy attributes, and TDF data with at least two attributes -\none assigned a KAS Grant to Bob's KAS and another assigned a KAS Grant to Alice's KAS."}),(0,i.jsx)(t.p,{children:"Both KASes will need to permit access and release payload keys for the data TDF'd with multiple attributes assigned KAS Grants to be accessible and decrypted."}),(0,i.jsxs)(t.p,{children:["Attribute A: ",(0,i.jsx)(t.code,{children:"https://conglomerate.com/attr/organization/value/acmeco"})]}),(0,i.jsxs)(t.p,{children:["Attribute B: ",(0,i.jsx)(t.code,{children:"https://conglomerate.com/attr/department/value/marketing"})]}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Attribute"}),(0,i.jsx)(t.th,{children:"Namespace"}),(0,i.jsx)(t.th,{children:"Definition"}),(0,i.jsx)(t.th,{children:"Value"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"A"}),(0,i.jsx)(t.td,{children:"conglomerate.com"}),(0,i.jsx)(t.td,{children:"organization"}),(0,i.jsx)(t.td,{children:"acmeco"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"A"}),(0,i.jsx)(t.td,{children:"conglomerate.com"}),(0,i.jsx)(t.td,{children:"department"}),(0,i.jsx)(t.td,{children:"marketing"})]})]})]}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Attribute KAS Grant Scenarios"})}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Bob & Alice represent individual KAS Grants to attributes on TDF'd data"}),"\n",(0,i.jsxs)(t.li,{children:["Note that the attributes A and B are of ",(0,i.jsx)(t.em,{children:"the same namespace but different definitions"})]}),"\n"]}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Definition: A"}),(0,i.jsx)(t.th,{children:"Value: A"}),(0,i.jsx)(t.th,{children:"Definition: B"}),(0,i.jsx)(t.th,{children:"Value: B"}),(0,i.jsx)(t.th,{children:"Split"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Bob"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Alice"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"AND"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Bob"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Alice"}),(0,i.jsx)(t.td,{children:"AND"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Bob"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Alice"}),(0,i.jsx)(t.td,{children:"AND"})]})]})]}),(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["[!NOTE]\nAny KAS Grants to attributes across different definitions or namespaces will be ",(0,i.jsx)(t.code,{children:"AND"})," splits."]}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},68818:(e,t,n)=>{n.d(t,{A:()=>x});var s=n(96540);const i=(0,s.createContext)(null),r={didCatch:!1,error:null};class d extends s.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=r}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,n,s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];null===(t=(n=this.props).onReset)||void 0===t||t.call(n,{args:i,reason:"imperative-api"}),this.setState(r)}}componentDidCatch(e,t){var n,s;null===(n=(s=this.props).onError)||void 0===n||n.call(s,e,t)}componentDidUpdate(e,t){const{didCatch:n}=this.state,{resetKeys:s}=this.props;var i,d;n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,n)=>!Object.is(e,t[n])))}(e.resetKeys,s)&&(null===(i=(d=this.props).onReset)||void 0===i||i.call(d,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(r))}render(){const{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:d,error:l}=this.state;let c=e;if(d){const e={error:l,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)c=t(e);else if(n)c=(0,s.createElement)(n,e);else{if(void 0===r)throw l;c=r}}return(0,s.createElement)(i.Provider,{value:{didCatch:d,error:l,resetErrorBoundary:this.resetErrorBoundary}},c)}}var l=n(74848);function c({name:e,shorthand:t,description:n,default:s,required:i}){const r=(0,l.jsxs)("code",{children:["--",e," <",e,">"]}),d=t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("code",{children:["-",t]}),","]});return(0,l.jsxs)("dl",{children:[(0,l.jsxs)("dt",{children:[d," ",r]}),(0,l.jsxs)("dd",{children:[n,"\xa0(",(0,l.jsx)("em",{children:"required"}),": ",(0,l.jsx)("code",{children:i?"true":"false"}),")",s&&(0,l.jsxs)(l.Fragment,{children:["\xa0(",(0,l.jsx)("em",{children:"default"}),": ",(0,l.jsx)("code",{children:s}),")"]})]})]})}function a(e){return e?(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Options"}),e?.map((e=>(0,l.jsx)(c,{...e})))]}):null}function o(e){return e?(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Aliases"}),e?.map(((t,n)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("code",{children:t}),n<e.length-1&&", "]})))]}):null}function h({children:e,fullCommand:t,title:n,command:s}){console.log(s);const{flags:i,args:r,arbitrary_args:d,aliases:c,hidden:h}=s;let x=t;return i&&(x+=" [flags]"),r&&(x+=" "+r.map((e=>`<${e}>`)).join(" ")),d&&(x+=" "+d.map((e=>`[${e}]`)).join(" ")),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:[s.name," - ",n]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Synopsis"}),(0,l.jsx)("pre",{children:(0,l.jsx)("code",{children:x})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Description"}),e]}),a(i),o(c)]})}function x({children:e,...t}){return(0,l.jsx)(d,{fallback:({error:e,tryAgain:t})=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:["This component crashed because of error: ",e.message,"."]}),(0,l.jsx)("button",{onClick:t,children:"Try Again!"})]}),children:(0,l.jsx)(h,{...t,children:e})})}},28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>l});var s=n(96540);const i={},r=s.createContext(i);function d(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);