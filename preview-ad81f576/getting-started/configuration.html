<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Configuration | OpenTDF</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.opentdf.io/preview-ad81f576/img/opentdf-social.png"><meta data-rh="true" name="twitter:image" content="https://docs.opentdf.io/preview-ad81f576/img/opentdf-social.png"><meta data-rh="true" property="og:url" content="https://docs.opentdf.io/preview-ad81f576/getting-started/configuration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration | OpenTDF"><meta data-rh="true" name="description" content="This guide provides details about the configuration setup for the platform, including the logger, services , and server configurations."><meta data-rh="true" property="og:description" content="This guide provides details about the configuration setup for the platform, including the logger, services , and server configurations."><link data-rh="true" rel="icon" href="/preview-ad81f576/img/OpenTDF-Logo.png"><link data-rh="true" rel="canonical" href="https://docs.opentdf.io/preview-ad81f576/getting-started/configuration"><link data-rh="true" rel="alternate" href="https://docs.opentdf.io/preview-ad81f576/getting-started/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.opentdf.io/preview-ad81f576/getting-started/configuration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting Started","item":"https://docs.opentdf.io/preview-ad81f576/getting-started"},{"@type":"ListItem","position":2,"name":"Configuration","item":"https://docs.opentdf.io/preview-ad81f576/getting-started/configuration"}]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"OpenTDF","url":"https://opentdf.io","logo":"https://docs.opentdf.io/img/opentdf-social.png"}</script><link rel="stylesheet" href="/preview-ad81f576/assets/css/styles.52f90cbf.css">
<script src="/preview-ad81f576/assets/js/runtime~main.ed592f92.js" defer="defer"></script>
<script src="/preview-ad81f576/assets/js/main.8f8b19ec.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/preview-ad81f576/"><div class="navbar__logo"><img src="/preview-ad81f576/img/OpenTDF-Logo.png" alt="OpenTDF - Protect the Data, Build the Future" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/preview-ad81f576/img/OpenTDF-Logo.png" alt="OpenTDF - Protect the Data, Build the Future" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">OpenTDF</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/preview-ad81f576/introduction">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/opentdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/preview-ad81f576/"><img src="/preview-ad81f576/img/OpenTDF-Logo.png" alt="OpenTDF - Protect the Data, Build the Future" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/preview-ad81f576/img/OpenTDF-Logo.png" alt="OpenTDF - Protect the Data, Build the Future" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"><b>OpenTDF</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/preview-ad81f576/introduction">Welcome to OpenTDF Docs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/preview-ad81f576/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/preview-ad81f576/getting-started/configuration">Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/preview-ad81f576/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/preview-ad81f576/category/components-and-services">Components and Services</a><button aria-label="Expand sidebar category &#x27;Components and Services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/preview-ad81f576/category/sdk">SDK</a><button aria-label="Expand sidebar category &#x27;SDK&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/preview-ad81f576/OpenAPI-clients">OpenAPI Clients</a><button aria-label="Expand sidebar category &#x27;OpenAPI Clients&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/preview-ad81f576/spec">Specification</a><button aria-label="Expand sidebar category &#x27;Specification&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/preview-ad81f576/appendix/matrix">Appendix</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/preview-ad81f576/release-notes">Release Notes</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/preview-ad81f576/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/preview-ad81f576/getting-started"><span>Getting Started</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Configuration</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12 markdown"><header><h1>Platform Configuration</h1></header>
<p>This guide provides details about the configuration setup for the platform, including the logger, services , and server configurations.</p>
<p>The platform leverages <a href="https://github.com/spf13/viper" target="_blank" rel="noopener noreferrer">viper</a> to help load configuration.</p>
<ul>
<li><a href="#platform-configuration">Platform Configuration</a>
<ul>
<li><a href="#deployment-mode">Deployment Mode</a>
<ul>
<li><a href="#service-negation">Service Negation</a></li>
</ul>
</li>
<li><a href="#sdk-configuration">SDK Configuration</a></li>
<li><a href="#logger-configuration">Logger Configuration</a></li>
<li><a href="#server-configuration">Server Configuration</a>
<ul>
<li><a href="#cors-configuration">CORS Configuration</a>
<ul>
<li><a href="#additive-configuration">Additive Configuration</a></li>
<li><a href="#programmatic-configuration">Programmatic Configuration</a></li>
</ul>
</li>
<li><a href="#crypto-provider">Crypto Provider</a></li>
<li><a href="#tracing-configuration">Tracing Configuration</a></li>
</ul>
</li>
<li><a href="#database-configuration">Database Configuration</a></li>
<li><a href="#security-configuration">Security Configuration</a></li>
<li><a href="#services-configuration">Services Configuration</a>
<ul>
<li><a href="#key-access-server-kas">Key Access Server (KAS)</a></li>
<li><a href="#authorization">Authorization</a>
<ul>
<li><a href="#shared-keys-v1--v2">Shared Keys (v1 &amp; v2)</a></li>
<li><a href="#authorization-v1-only">Authorization v1 Only</a></li>
<li><a href="#authorization-v2-only">Authorization v2 Only</a></li>
<li><a href="#example-authorization-v1">Example: Authorization v1</a></li>
<li><a href="#example-authorization-v2">Example: Authorization v2</a></li>
</ul>
</li>
<li><a href="#entity-resolution">Entity Resolution</a>
<ul>
<li><a href="#shared-keys-v1--v2-1">Shared Keys (v1 &amp; v2)</a></li>
<li><a href="#entity-resolution-v1-only">Entity Resolution v1 Only</a></li>
<li><a href="#entity-resolution-v2-only">Entity Resolution v2 Only</a></li>
<li><a href="#example-entity-resolution-v1">Example: Entity Resolution v1</a></li>
<li><a href="#example-entity-resolution-v2">Example: Entity Resolution v2</a></li>
</ul>
</li>
<li><a href="#policy">Policy</a></li>
<li><a href="#casbin-endpoint-authorization">Casbin Endpoint Authorization</a>
<ul>
<li><a href="#key-aspects-of-authorization-configuration">Key Aspects of Authorization Configuration</a></li>
<li><a href="#configuration-in-opentdf-exampleyaml">Configuration in opentdf-example.yaml</a></li>
<li><a href="#role-permissions">Role Permissions</a></li>
<li><a href="#managing-authorization-policy">Managing Authorization Policy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cache-configuration">Cache Configuration</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deployment-mode">Deployment Mode<a href="#deployment-mode" class="hash-link" aria-label="Direct link to Deployment Mode" title="Direct link to Deployment Mode">​</a></h2>
<p>The platform is designed as a modular monolith, meaning that all services are built into and run from the same binary. However, these services can be grouped and run together based on specific needs. The available service groups are:</p>
<ul>
<li>all: Runs every service that is registered within the platform.</li>
<li>core: Runs essential services, including policy, authorization, and wellknown services.</li>
<li>kas: Runs the Key Access Server (KAS) service.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="service-negation">Service Negation<a href="#service-negation" class="hash-link" aria-label="Direct link to Service Negation" title="Direct link to Service Negation">​</a></h3>
<p>You can exclude specific services from any mode using the negation syntax <code>-servicename</code>:</p>
<ul>
<li><strong>Syntax</strong>: <code>mode: &lt;base-mode&gt;,-&lt;service1&gt;,-&lt;service2&gt;</code></li>
<li><strong>Constraint</strong>: At least one positive mode must be specified (negation-only modes like <code>-kas</code> will result in an error)</li>
<li><strong>Available services</strong>: <code>policy</code>, <code>authorization</code>, <code>kas</code>, <code>entityresolution</code>, <code>wellknown</code></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># Run all services except Entity Resolution Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">mode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">entityresolution</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Run core services except Policy Service  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">mode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">policy</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Run all services except both KAS and Entity Resolution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">mode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> all</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">entityresolution</span><br></span></code></pre></div></div>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>mode</code></td><td>Drives which services to run. Supported modes: <code>all</code>, <code>core</code>, <code>kas</code>. Use <code>-servicename</code> to exclude specific services (e.g., <code>all,-entityresolution</code>)</td><td><code>all</code></td><td>OPENTDF_MODE</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sdk-configuration">SDK Configuration<a href="#sdk-configuration" class="hash-link" aria-label="Direct link to SDK Configuration" title="Direct link to SDK Configuration">​</a></h2>
<p>The sdk configuration is used when operating the service in mode <code>kas</code>. When running in mode <code>core</code> or <code>all</code> an in-process communication is leveraged over an in-memory grpc server.</p>
<p>Root level key <code>sdk_config</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>core.endpoint</code></td><td>The core platform endpoint to connect to</td><td></td><td>OPENTDF_SDK_CONFIG_ENDPOINT</td></tr><tr><td><code>core.plaintext</code></td><td>Use a plaintext grpc connection</td><td><code>false</code></td><td>OPENTDF_SDK_CONFIG_PLAINTEXT</td></tr><tr><td><code>core.insecure</code></td><td>Use an insecure tls connection</td><td><code>false</code></td><td></td></tr><tr><td><code>entityresolution.endpoint</code></td><td>The entityresolution endpoint to connect to</td><td></td><td></td></tr><tr><td><code>entityresolution.plaintext</code></td><td>Use a plaintext ERS grpc connection</td><td><code>false</code></td><td></td></tr><tr><td><code>entityresolution.insecure</code></td><td>Use an insecure tls connection</td><td><code>false</code></td><td></td></tr><tr><td><code>client_id</code></td><td>OAuth client id</td><td></td><td>OPENTDF_SDK_CONFIG_CLIENT_ID</td></tr><tr><td><code>client_secret</code></td><td>The clients credentials</td><td></td><td>OPENTDF_SDK_CONFIG_CLIENT_SECRET</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logger-configuration">Logger Configuration<a href="#logger-configuration" class="hash-link" aria-label="Direct link to Logger Configuration" title="Direct link to Logger Configuration">​</a></h2>
<p>The logger configuration is used to define how the application logs its output.</p>
<p>Root level key <code>logger</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>level</code></td><td>The logging level.</td><td><code>info</code></td><td>OPENTDF_LOGGER_LEVEL</td></tr><tr><td><code>type</code></td><td>The format of the log output.</td><td><code>json</code></td><td>OPENTDF_LOGGER_TYPE</td></tr><tr><td><code>output</code></td><td>Stream output for logs, stderr or stdout</td><td><code>stdout</code></td><td>OPENTDF_LOGGER_OUTPUT</td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">logger</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">level</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> debug</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> text</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">output</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> stderr</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="server-configuration">Server Configuration<a href="#server-configuration" class="hash-link" aria-label="Direct link to Server Configuration" title="Direct link to Server Configuration">​</a></h2>
<p>The server configuration is used to define how the application runs its server.</p>
<p>Root level key <code>server</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>auth.audience</code></td><td>The audience for the IDP.</td><td></td><td>OPENTDF_SERVER_AUTH_AUDIENCE</td></tr><tr><td><code>auth.issuer</code></td><td>The issuer for the IDP.</td><td></td><td>OPENTDF_SERVER_AUTH_ISSUER</td></tr><tr><td><code>auth.policy</code></td><td>The Casbin policy for enforcing authorization on endpoints. Described <a href="#casbin-endpoint-authorization">below</a></td><td></td><td></td></tr><tr><td><code>auth.cache_refresh</code></td><td>Interval in which the IDP jwks should be refreshed</td><td><code>15m</code></td><td>OPENTDF_SERVER_AUTH_CACHE_REFRESH</td></tr><tr><td><code>auth.dpopskew</code></td><td>The amount of time drift allowed between when the client generated a dpop proof and the server time.</td><td><code>1h</code></td><td>OPENTDF_SERVER_AUTH</td></tr><tr><td><code>auth.skew</code></td><td>The amount of time drift allowed between a tokens <code>exp</code> claim and the server time.</td><td><code>1m</code></td><td>OPENTDF_SERVER_AUTH_SKEW</td></tr><tr><td><code>auth.public_client_id</code></td><td>[DEPRECATED] The oidc client id. This is leveraged by otdfctl.</td><td></td><td>OPENTDF_SERVER_AUTH_PUBLIC_CLIENT_ID</td></tr><tr><td><code>auth.enforceDPoP</code></td><td>If true, DPoP bindings on Access Tokens are enforced.</td><td><code>false</code></td><td>OPENTDF_SERVER_AUTH_ENFORCEDPOP</td></tr><tr><td><code>cryptoProvider</code></td><td>A list of public/private keypairs and their use. Described <a href="#crypto-provider">below</a></td><td>empty</td><td></td></tr><tr><td><code>enable_pprof</code></td><td>Enable golang performance profiling</td><td><code>false</code></td><td>OPENTDF_SERVER_ENABLE_PPROF</td></tr><tr><td><code>grpc.reflection</code></td><td>The configuration for the grpc server.</td><td><code>true</code></td><td>OPENTDF_SERVER_GRPC_REFLECTION</td></tr><tr><td><code>public_hostname</code></td><td>The public facing hostname for the server.</td><td></td><td>OPENTDF_SERVER_PUBLIC_HOSTNAME</td></tr><tr><td><code>host</code></td><td>The host address for the server.</td><td><code>&quot;&quot;</code></td><td>OPENTDF_SERVER_HOST</td></tr><tr><td><code>port</code></td><td>The port number for the server.</td><td><code>9000</code></td><td>OPENTDF_SERVER_PORT</td></tr><tr><td><code>tls.enabled</code></td><td>Enable tls.</td><td><code>false</code></td><td>OPENTDF_SERVER_TLS_ENABLED</td></tr><tr><td><code>tls.cert</code></td><td>The path to the tls certificate.</td><td></td><td>OPENTDF_SERVER_TLS_CERT</td></tr><tr><td><code>tls.key</code></td><td>The path to the tls key.</td><td></td><td>OPENTDF_SERVER_TLS_KEY</td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">grpc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">reflection</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">cert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> /path/to/cert</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> /path/to/key</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">auth</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">audience</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//example.com</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">issuer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//example.com</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">cryptoProvider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">standard</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">keys</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> r1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token number" style="color:rgb(9, 134, 88)">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">private</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">private.pem</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">cert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">cert.pem</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> e1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">secp256r1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">private</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">ec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">private.pem</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token key atrule">cert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">ec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">cert.pem</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cors-configuration">CORS Configuration<a href="#cors-configuration" class="hash-link" aria-label="Direct link to CORS Configuration" title="Direct link to CORS Configuration">​</a></h3>
<p>Root level key <code>server.cors</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>enabled</code></td><td>Enable CORS for the server</td><td><code>true</code></td><td>OPENTDF_SERVER_CORS_ENABLED</td></tr><tr><td><code>allowedorigins</code></td><td>List of allowed origins (<code>*</code> for any)</td><td><code>[]</code></td><td>OPENTDF_SERVER_CORS_ALLOWEDORIGINS</td></tr><tr><td><code>allowedmethods</code></td><td>List of allowed HTTP methods</td><td><code>[&quot;GET&quot;,&quot;POST&quot;,&quot;PATCH&quot;,&quot;DELETE&quot;,&quot;OPTIONS&quot;]</code></td><td>OPENTDF_SERVER_CORS_ALLOWEDMETHODS</td></tr><tr><td><code>allowedheaders</code></td><td>List of allowed request headers</td><td><code>[&quot;Accept&quot;,&quot;Accept-Encoding&quot;,&quot;Authorization&quot;,&quot;Connect-Protocol-Version&quot;,&quot;Content-Length&quot;,&quot;Content-Type&quot;,&quot;Dpop&quot;,&quot;X-CSRF-Token&quot;,&quot;X-Requested-With&quot;,&quot;X-Rewrap-Additional-Context&quot;]</code></td><td>OPENTDF_SERVER_CORS_ALLOWEDHEADERS</td></tr><tr><td><code>exposedheaders</code></td><td>List of response headers browsers can access</td><td><code>[]</code></td><td>OPENTDF_SERVER_CORS_EXPOSEDHEADERS</td></tr><tr><td><code>allowcredentials</code></td><td>Whether credentials are included in CORS requests</td><td><code>true</code></td><td>OPENTDF_SERVER_CORS_ALLOWCREDENTIALS</td></tr><tr><td><code>maxage</code></td><td>Maximum age (seconds) of preflight cache</td><td><code>3600</code></td><td>OPENTDF_SERVER_CORS_MAXAGE</td></tr><tr><td><code>additionalmethods</code></td><td>Additional methods to append to defaults</td><td><code>[]</code></td><td>OPENTDF_SERVER_CORS_ADDITIONALMETHODS</td></tr><tr><td><code>additionalheaders</code></td><td>Additional headers to append to defaults</td><td><code>[]</code></td><td>OPENTDF_SERVER_CORS_ADDITIONALHEADERS</td></tr><tr><td><code>additionalexposedheaders</code></td><td>Additional exposed headers to append</td><td><code>[]</code></td><td>OPENTDF_SERVER_CORS_ADDITIONALEXPOSEDHEADERS</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="additive-configuration">Additive Configuration<a href="#additive-configuration" class="hash-link" aria-label="Direct link to Additive Configuration" title="Direct link to Additive Configuration">​</a></h4>
<p>The <code>additional*</code> fields allow operators to extend the default lists without replacing them entirely:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">cors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># Add custom headers without copying all defaults</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">additionalheaders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">Custom</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">Header</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">Another</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">Header</span><br></span></code></pre></div></div>
<p>To completely replace defaults, use the base fields directly:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">cors</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">allowedheaders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> Authorization</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> Content</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">Type</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)"># Only these headers will be allowed</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="programmatic-configuration">Programmatic Configuration<a href="#programmatic-configuration" class="hash-link" aria-label="Direct link to Programmatic Configuration" title="Direct link to Programmatic Configuration">​</a></h4>
<p>For applications embedding the OpenTDF platform, CORS can also be configured programmatically using functional options. These are applied after YAML/environment configuration and follow the same additive semantics:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;github.com/opentdf/platform/service/pkg/server&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">err </span><span class="token operator" style="color:rgb(0, 0, 0)">:=</span><span class="token plain"> server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Start</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">WithConfigFile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;opentdf.yaml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// Add custom headers for your application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">WithAdditionalCORSHeaders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;X-Custom-Header&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;X-App-Version&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// Add custom methods if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">WithAdditionalCORSMethods</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;CUSTOM&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">// Expose additional response headers to browsers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">WithAdditionalCORSExposedHeaders</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;X-Request-Id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;X-Trace-Id&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre></div></div>
<p><strong>Configuration Precedence:</strong></p>
<ol>
<li><strong>Defaults</strong> - Built-in default values</li>
<li><strong>YAML/Environment</strong> - Operator configuration via <code>server.cors.*</code> fields</li>
<li><strong>Programmatic Options</strong> - Developer overlays via <code>WithAdditionalCORS*</code> functions</li>
</ol>
<p>All layers are additive. Deduplication is handled automatically (case-insensitive for headers per RFC 7230, case-sensitive for methods per RFC 7231).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crypto-provider">Crypto Provider<a href="#crypto-provider" class="hash-link" aria-label="Direct link to Crypto Provider" title="Direct link to Crypto Provider">​</a></h3>
<p>To configure the Key Access Server,
you must define a set of one or more public keypairs
and a method for loading and using them.</p>
<p>The crypto provider is implemented as an interface,
allowing multiple implementations.</p>
<p>Root level key <code>cryptoProvider</code></p>
<p>Environment Variable: <code>OPENTDF_SERVER_CRYPTOPROVIDER_STANDARD=&#x27;[{&quot;alg&quot;:&quot;rsa:2048&quot;,&quot;kid&quot;:&quot;k1&quot;,&quot;private&quot;:&quot;kas-private.pem&quot;,&quot;cert&quot;:&quot;kas-cert.pem&quot;}]&#x27;</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>cryptoProvider.type</code></td><td>The type of crypto provider to use.</td><td><code>standard</code></td></tr><tr><td><code>cryptoProvider.standard.*.alg</code></td><td>An enum for the associated crypto type. E.g. <code>rsa:2048</code> or <code>ec:secp256r1</code></td><td></td></tr><tr><td><code>cryptoProvider.standard.*.kid</code></td><td>A short, globally unique, stable identifier for this keypair.</td><td></td></tr><tr><td><code>cryptoProvider.standard.*.private</code></td><td>Path to the private key as a PEM file.</td><td></td></tr><tr><td><code>cryptoProvider.standard.*.cert</code></td><td>(Optional) Path to a public cert for the keypair.</td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tracing-configuration">Tracing Configuration<a href="#tracing-configuration" class="hash-link" aria-label="Direct link to Tracing Configuration" title="Direct link to Tracing Configuration">​</a></h3>
<p>Root level key <code>server.trace</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>server.trace.enabled</code></td><td>Enable distributed tracing</td><td><code>false</code></td><td>OPENTDF_SERVER_TRACE_ENABLED</td></tr><tr><td><code>server.trace.provider.name</code></td><td>Tracing provider (file or otlp)</td><td><code>otlp</code></td><td>OPENTDF_SERVER_TRACE_PROVIDER_NAME</td></tr></tbody></table>
<p>For file provider:</p>
<ul>
<li><code>server.trace.provider.file.path</code>: Path to trace file output</li>
<li><code>server.trace.provider.file.prettyPrint</code>: Enable pretty-printed JSON</li>
<li><code>server.trace.provider.file.maxSize</code>: Maximum file size in MB</li>
<li><code>server.trace.provider.file.maxBackups</code>: Maximum number of backup files</li>
<li><code>server.trace.provider.file.maxAge</code>: Maximum age of files in days</li>
<li><code>server.trace.provider.file.compress</code>: Enable compression of trace files</li>
</ul>
<p>For OTLP provider:</p>
<ul>
<li><code>server.trace.provider.otlp.protocol</code>: Protocol to use (grpc or http/protobuf)</li>
<li><code>server.trace.provider.otlp.endpoint</code>: Endpoint URL for the collector</li>
<li><code>server.trace.provider.otlp.insecure</code>: Whether to use an insecure connection</li>
<li><code>server.trace.provider.otlp.headers</code>: Headers to include in OTLP requests</li>
</ul>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">trace</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">provider</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> otlp</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">otlp</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> grpc</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">endpoint</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;localhost:4317&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">insecure</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="database-configuration">Database Configuration<a href="#database-configuration" class="hash-link" aria-label="Direct link to Database Configuration" title="Direct link to Database Configuration">​</a></h2>
<p>The database configuration is used to define how the application connects to its database.</p>
<p>Root level key <code>db</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><code>host</code></td><td>The host address for the database.</td><td><code>localhost</code></td><td>OPENTDF_DB_HOST</td></tr><tr><td><code>port</code></td><td>The port number for the database.</td><td><code>5432</code></td><td>OPENTDF_DB_PORT</td></tr><tr><td><code>database</code></td><td>The name of the database.</td><td><code>opentdf</code></td><td>OPENTDF_DB_DATABASE</td></tr><tr><td><code>user</code></td><td>The username for the database.</td><td><code>postgres</code></td><td>OPENTDF_DB_USER</td></tr><tr><td><code>password</code></td><td>The password for the database.</td><td><code>changeme</code></td><td>OPENTDF_DB_PASSWORD</td></tr><tr><td><code>sslmode</code></td><td>The ssl mode for the database</td><td><code>prefer</code></td><td>OPENTDF_DB_SSLMODE</td></tr><tr><td><code>schema</code></td><td>The schema for the database.</td><td><code>opentdf</code></td><td>OPENTDF_DB_SCHEMA</td></tr><tr><td><code>runMigration</code></td><td>Whether to run the database migration or not.</td><td><code>true</code></td><td>OPENTDF_DB_RUNMIGRATION</td></tr><tr><td><code>connect_timeout_seconds</code></td><td>Connection timeout duration (seconds).</td><td><code>15</code></td><td>OPENTDF_DB_CONNECT_TIMEOUT_SECONDS</td></tr><tr><td><code>pool</code></td><td>Pool configuration settings.</td><td></td><td></td></tr><tr><td><code>pool.max_connection_count</code></td><td>Maximum number of connections per pool.</td><td><code>4</code></td><td>OPENTDF_DB_POOL_MAX_CONNECTION_COUNT</td></tr><tr><td><code>pool.min_connection_count</code></td><td>Minimum number of connections per pool.</td><td><code>0</code></td><td>OPENTDF_DB_POOL_MIN_CONNECTION_COUNT</td></tr><tr><td><code>pool.max_connection_lifetime_seconds</code></td><td>Maximum seconds per connection lifetime.</td><td><code>3600</code></td><td>OPENTDF_DB_POOL_MAX_CONNECTION_LIFETIME_SECONDS</td></tr><tr><td><code>pool.min_idle_connections_count</code></td><td>Minimum number of idle connections per pool.</td><td><code>0</code></td><td>OPENTDF_DB_POOL_MIN_IDLE_CONNECTIONS_COUNT</td></tr><tr><td><code>pool.max_connection_idle_seconds</code></td><td>Maximum seconds allowed for idle connection.</td><td><code>1800</code></td><td>OPENTDF_DB_POOL_MAX_CONNECTION_IDLE_SECONDS</td></tr><tr><td><code>pool.health_check_period_seconds</code></td><td>Interval seconds per health check.</td><td><code>60</code></td><td>OPENTDF_DB_POOL_HEALTH_CHECK_PERIOD_SECONDS</td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">db</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5432</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">database</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> opentdf</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> changeme</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">sslmode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> require</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> opentdf</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">runMigration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">connect_timeout_seconds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">pool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max_connection_count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">min_connection_count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max_connection_lifetime_seconds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">3600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">min_idle_connections_count</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max_connection_idle_seconds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">health_check_period_seconds</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">60</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="security-configuration">Security Configuration<a href="#security-configuration" class="hash-link" aria-label="Direct link to Security Configuration" title="Direct link to Security Configuration">​</a></h2>
<p>Root level key <code>security</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>unsafe.clock_skew</code></td><td>Platform-wide maximum tolerated clock skew for token verification (Go duration, use cautiously)</td><td><code>1m</code></td></tr></tbody></table>
<blockquote>
<p><strong>Warning:</strong> Increasing <code>unsafe.clock_skew</code> weakens token freshness guarantees. Only raise this value temporarily while you correct clock drift.</p>
</blockquote>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="services-configuration">Services Configuration<a href="#services-configuration" class="hash-link" aria-label="Direct link to Services Configuration" title="Direct link to Services Configuration">​</a></h2>
<p>Root level key <code>services</code></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="key-access-server-kas">Key Access Server (KAS)<a href="#key-access-server-kas" class="hash-link" aria-label="Direct link to Key Access Server (KAS)" title="Direct link to Key Access Server (KAS)">​</a></h3>
<p>Root level key <code>kas</code></p>
<p>Environment Variable: <code>OPENTDF_SERVICES_KAS_KEYRING=&#x27;[{&quot;kid&quot;:&quot;k1&quot;,&quot;alg&quot;:&quot;rsa:2048&quot;},{&quot;kid&quot;:&quot;k2&quot;,&quot;alg&quot;:&quot;ec:secp256r1&quot;}]&#x27;</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>keyring.*.kid</code></td><td>Which key id this is binding</td><td></td></tr><tr><td><code>keyring.*.alg</code></td><td>(Optional) Associated algorithm. (Allows reusing KID with different algorithms)</td><td></td></tr><tr><td><code>keyring.*.legacy</code></td><td>Indicates this may be used for TDFs with no key ID; default if all unspecified.</td><td>inferred</td></tr><tr><td><code>preview.ec_tdf_enabled</code></td><td>Whether tdf based ecc support is enabled.</td><td><code>false</code></td></tr><tr><td><code>preview.key_management</code></td><td>Whether new key management features are enabled.</td><td><code>false</code></td></tr><tr><td><code>root_key</code></td><td>Key needed when new key_management functionality is enabled.</td><td></td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">security</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">unsafe</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># Increase only when diagnosing clock drift issues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># clock_skew: 90s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">kas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">keyring</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> e2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">secp256r1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> e1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">secp256r1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">legacy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> r2f</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token number" style="color:rgb(9, 134, 88)">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">kid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> r1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">alg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token number" style="color:rgb(9, 134, 88)">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">legacy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authorization">Authorization<a href="#authorization" class="hash-link" aria-label="Direct link to Authorization" title="Direct link to Authorization">​</a></h3>
<p>Root level key <code>authorization</code></p>
<blockquote>
<p><strong>Note:</strong> Both Authorization v1 and v2 use the same configuration section, but some keys are version-specific. See below for details.</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shared-keys-v1--v2">Shared Keys (v1 &amp; v2)<a href="#shared-keys-v1--v2" class="hash-link" aria-label="Direct link to Shared Keys (v1 &amp; v2)" title="Direct link to Shared Keys (v1 &amp; v2)">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><em>(none currently; all keys are version-specific)</em></td><td></td><td></td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authorization-v1-only">Authorization v1 Only<a href="#authorization-v1-only" class="hash-link" aria-label="Direct link to Authorization v1 Only" title="Direct link to Authorization v1 Only">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><code>rego.path</code></td><td>Path to rego policy file</td><td>Leverages embedded rego policy</td><td>OPENTDF_SERVICES_AUTHORIZATION_REGO_PATH</td></tr><tr><td><code>rego.query</code></td><td>Rego query to execute</td><td><code>data.opentdf.entitlements.attributes</code></td><td>OPENTDF_SERVICES_AUTHORIZATION_REGO_QUERY</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authorization-v2-only">Authorization v2 Only<a href="#authorization-v2-only" class="hash-link" aria-label="Direct link to Authorization v2 Only" title="Direct link to Authorization v2 Only">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><code>entitlement_policy_cache.enabled</code></td><td>Enable the entitlement policy cache</td><td><code>false</code></td><td></td></tr><tr><td><code>entitlement_policy_cache.refresh_interval</code></td><td>How often to refresh the entitlement policy cache (e.g. <code>30s</code>)</td><td></td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-authorization-v1">Example: Authorization v1<a href="#example-authorization-v1" class="hash-link" aria-label="Direct link to Example: Authorization v1" title="Direct link to Example: Authorization v1">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">authorization</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">rego</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> /path/to/policy.rego</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> data.opentdf.entitlements.attributes</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-authorization-v2">Example: Authorization v2<a href="#example-authorization-v2" class="hash-link" aria-label="Direct link to Example: Authorization v2" title="Direct link to Example: Authorization v2">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">authorization</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">entitlement_policy_cache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">refresh_interval</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> 30s</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="entity-resolution">Entity Resolution<a href="#entity-resolution" class="hash-link" aria-label="Direct link to Entity Resolution" title="Direct link to Entity Resolution">​</a></h3>
<p>Root level key <code>entityresolution</code></p>
<blockquote>
<p><strong>Note:</strong> Both Entity Resolution v1 and v2 use the same configuration section. All configuration keys are shared between v1 and v2, except <code>cache_expiration</code>, which is only used in v2.</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shared-keys-v1--v2-1">Shared Keys (v1 &amp; v2)<a href="#shared-keys-v1--v2-1" class="hash-link" aria-label="Direct link to Shared Keys (v1 &amp; v2)" title="Direct link to Shared Keys (v1 &amp; v2)">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>mode</code></td><td>The mode in which to run ERS (<code>keycloak</code> or <code>claims</code>)</td><td><code>keycloak</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_MODE</td></tr><tr><td><code>url</code></td><td>Endpoint URL for the entity resolution service (specific to <code>keycloak</code> mode)</td><td><code>&quot;&quot;</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_URL</td></tr><tr><td><code>clientid</code></td><td>Keycloak client ID for authentication (specific to <code>keycloak</code> mode)</td><td><code>&quot;&quot;</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_CLIENTID</td></tr><tr><td><code>clientsecret</code></td><td>Keycloak client secret for authentication(specific to <code>keycloak</code> mode)</td><td><code>&quot;&quot;</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_CLIENTSECRET</td></tr><tr><td><code>realm</code></td><td>Keycloak realm for authentication (specific to <code>keycloak</code> mode)</td><td></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_REALM</td></tr><tr><td><code>legacykeycloak</code></td><td>Enables legacy Keycloak compatibility (<code>/auth</code> as base endpoint) (specific to <code>keycloak</code> mode)</td><td><code>false</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_LEGACYKEYCLOAK</td></tr><tr><td><code>inferid.from.email</code></td><td>Infer entity IDs from email addresses (specific to <code>keycloak</code> mode)</td><td><code>false</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_INFERID_FROM_EMAIL</td></tr><tr><td><code>inferid.from.username</code></td><td>Infer entity IDs from usernames (specific to <code>keycloak</code> mode)</td><td><code>false</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_INFERID_FROM_USERNAME</td></tr><tr><td><code>inferid.from.clientid</code></td><td>Infer entity IDs from client IDs (specific to <code>keycloak</code> mode)</td><td><code>false</code></td><td>OPENTDF_SERVICES_ENTITYRESOLUTION_INFERID_FROM_CLIENTID</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="entity-resolution-v1-only">Entity Resolution v1 Only<a href="#entity-resolution-v1-only" class="hash-link" aria-label="Direct link to Entity Resolution v1 Only" title="Direct link to Entity Resolution v1 Only">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><em>(none currently)</em></td><td></td><td></td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="entity-resolution-v2-only">Entity Resolution v2 Only<a href="#entity-resolution-v2-only" class="hash-link" aria-label="Direct link to Entity Resolution v2 Only" title="Direct link to Entity Resolution v2 Only">​</a></h4>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>cache_expiration</code></td><td>Cache duration for entity resolution results (e.g., <code>30s</code>). Disabled if not set or zero. (specific to <code>keycloak</code> mode)</td><td>disabled</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-entity-resolution-v1">Example: Entity Resolution v1<a href="#example-entity-resolution-v1" class="hash-link" aria-label="Direct link to Example: Entity Resolution v1" title="Direct link to Example: Entity Resolution v1">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">entityresolution</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">8888/auth</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">clientid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;tdf-entity-resolution&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">clientsecret</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;secret&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">realm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;opentdf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">legacykeycloak</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">inferid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-entity-resolution-v2">Example: Entity Resolution v2<a href="#example-entity-resolution-v2" class="hash-link" aria-label="Direct link to Example: Entity Resolution v2" title="Direct link to Example: Entity Resolution v2">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">entityresolution</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">8888/auth</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">clientid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;tdf-entity-resolution&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">clientsecret</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;secret&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">realm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;opentdf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">legacykeycloak</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">inferid</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">cache_expiration</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> 30s</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="policy">Policy<a href="#policy" class="hash-link" aria-label="Direct link to Policy" title="Direct link to Policy">​</a></h3>
<p>Root level key <code>policy</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th><th>Environment Variables</th></tr></thead><tbody><tr><td><code>list_request_limit_default</code></td><td>Policy List request limit default when not provided</td><td>1000</td><td>OPENTDF_SERVICES_POLICY_LIST_REQUEST_LIMIT_DEFAULT</td></tr><tr><td><code>list_request_limit_max</code></td><td>Policy List request limit maximum enforced by services</td><td>2500</td><td>OPENTDF_SERVICES_POLICY_LIST_REQUEST_LIMIT_MAX</td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">policy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">list_request_limit_default</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">list_request_limit_max</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2500</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="casbin-endpoint-authorization">Casbin Endpoint Authorization<a href="#casbin-endpoint-authorization" class="hash-link" aria-label="Direct link to Casbin Endpoint Authorization" title="Direct link to Casbin Endpoint Authorization">​</a></h3>
<p>OpenTDF uses Casbin to manage authorization policies. This document provides an overview of how to configure and manage the default authorization policy in OpenTDF.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="key-aspects-of-authorization-configuration">Key Aspects of Authorization Configuration<a href="#key-aspects-of-authorization-configuration" class="hash-link" aria-label="Direct link to Key Aspects of Authorization Configuration" title="Direct link to Key Aspects of Authorization Configuration">​</a></h4>
<ol start="2">
<li><strong>Username Claim</strong>: The claim in the OIDC token that should be used to extract a username.</li>
<li><strong>Group Claim</strong>: The claim in the OIDC token that should be used to find the group claims.</li>
<li><strong>Map (Deprecated)</strong>: Mapping between policy roles and IdP roles.</li>
<li><strong>Extension</strong>: Policy that will extend the builtin policy</li>
<li><strong>CSV</strong>: The authorization policy in CSV format. This will override the builtin policy.</li>
<li><strong>Model</strong>: The Casbin policy model. This should only be set if you have a deep understanding of how casbin works.</li>
</ol>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuration-in-opentdf-exampleyaml">Configuration in opentdf-example.yaml<a href="#configuration-in-opentdf-exampleyaml" class="hash-link" aria-label="Direct link to Configuration in opentdf-example.yaml" title="Direct link to Configuration in opentdf-example.yaml">​</a></h4>
<p>Below is an example configuration snippet from
opentdf-example.yaml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">auth</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">enforceDPoP</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># public_client_id: &#x27;opentdf-public&#x27; # DEPRECATED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">audience</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;http://localhost:8080&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">issuer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//keycloak</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">8888/auth/realms/opentdf</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">policy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Deprecated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Dot notation is used to access nested claims (i.e. realm_access.roles)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">claim</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;realm_access.roles&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Dot notation is used to access the username claim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">username_claim</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;email&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Dot notation is used to access the groups claim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">group_claim</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;realm_access.roles&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)"># Dot notation is used to access the claim the represents the idP client ID </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">client_id_claim</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)"># azp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Deprecated: Use standard casbin policy groupings (g, &lt;user/group&gt;, &lt;role&gt;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Maps the external role to the OpenTDF role</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Note: left side is used in the policy, right side is the external role</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">map</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">standard</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> opentdf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">standard</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token key atrule">admin</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> opentdf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">admin</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Policy that will extend the builtin policy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">extension</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token scalar string" style="color:rgb(163, 21, 21)"></span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:admin, *, *, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:attributes, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:subject-mappings, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        g, opentdf-admin, role:admin</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        g, alice@opentdf.io, role:standard</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Custom policy (see examples https://github.com/casbin/casbin/tree/master/examples)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## This will overwrite the builtin policy. Use with caution. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">csv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token scalar string" style="color:rgb(163, 21, 21)"></span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:admin, *, *, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:attributes, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:subject-mappings, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:resource-mappings, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:standard, policy:kas-registry, read, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:unknown, entityresolution.EntityResolutionService.ResolveEntities, write, allow</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        p, role:unknown, kas.AccessService/Rewrap, *, allow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Custom model (see https://casbin.org/docs/syntax-for-models/)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token comment" style="color:rgb(0, 128, 0)">## Avoid setting this unless you have a deep understanding of how casbin works. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token key atrule">model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token scalar string" style="color:rgb(163, 21, 21)"></span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        [request_definition]</span><br></span><span class="token-line" style="color:#000000"><span class="token scalar string" style="color:rgb(163, 21, 21)">        r = sub, res, act, obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">policy_definition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        p = sub</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> act</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> eft</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">role_definition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        g = _</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> _</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">policy_effect</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        e = some(where (p.eft == allow)) </span><span class="token important">&amp;&amp;</span><span class="token plain"> </span><span class="token tag" style="color:rgb(128, 0, 0)">!some(where</span><span class="token plain"> (p.eft == deny))</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">matchers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        m = g(r.sub</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> p.sub) </span><span class="token important">&amp;&amp;</span><span class="token plain"> globOrRegexMatch(r.res</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> p.res) </span><span class="token important">&amp;&amp;</span><span class="token plain"> globOrRegexMatch(r.act</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> p.act) </span><span class="token important">&amp;&amp;</span><span class="token plain"> globOrRegexMatch(r.obj</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> p.obj)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="role-permissions">Role Permissions<a href="#role-permissions" class="hash-link" aria-label="Direct link to Role Permissions" title="Direct link to Role Permissions">​</a></h4>
<ul>
<li><strong>Admin</strong>: Can perform all operations.</li>
<li><strong>Standard User</strong>: Can read.</li>
<li><strong>Public Endpoints</strong>: Accessible without specific roles.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="managing-authorization-policy">Managing Authorization Policy<a href="#managing-authorization-policy" class="hash-link" aria-label="Direct link to Managing Authorization Policy" title="Direct link to Managing Authorization Policy">​</a></h4>
<p>Admins can manage the authorization policy directly in the YAML configuration file. For detailed configuration options, refer to the <a href="https://casbin.org/docs/en/syntax-for-models" target="_blank" rel="noopener noreferrer">Casbin documentation</a>.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cache-configuration">Cache Configuration<a href="#cache-configuration" class="hash-link" aria-label="Direct link to Cache Configuration" title="Direct link to Cache Configuration">​</a></h2>
<p>The platform supports a cache manager to improve performance for frequently accessed data. You can configure the cache backend and its resource usage.</p>
<p>Root level key <code>cache</code></p>
<table><thead><tr><th>Field</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>ristretto.max_cost</code></td><td>Maximum cost for the cache (e.g. 100mb, 1gb)</td><td><code>1gb</code></td></tr></tbody></table>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token key atrule">ristretto</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">max_cost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> 1gb              </span><span class="token comment" style="color:rgb(0, 128, 0)"># Maximum cost (i.e. 1mb, 1gb) for the cache (default: 1gb)</span><br></span></code></pre></div></div></div></div></div><div class="row"><div class="col col--12"></div></div></article><div class="row"><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/preview-ad81f576/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/preview-ad81f576/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment-mode" class="table-of-contents__link toc-highlight">Deployment Mode</a><ul><li><a href="#service-negation" class="table-of-contents__link toc-highlight">Service Negation</a></li></ul></li><li><a href="#sdk-configuration" class="table-of-contents__link toc-highlight">SDK Configuration</a></li><li><a href="#logger-configuration" class="table-of-contents__link toc-highlight">Logger Configuration</a></li><li><a href="#server-configuration" class="table-of-contents__link toc-highlight">Server Configuration</a><ul><li><a href="#cors-configuration" class="table-of-contents__link toc-highlight">CORS Configuration</a></li><li><a href="#crypto-provider" class="table-of-contents__link toc-highlight">Crypto Provider</a></li><li><a href="#tracing-configuration" class="table-of-contents__link toc-highlight">Tracing Configuration</a></li></ul></li><li><a href="#database-configuration" class="table-of-contents__link toc-highlight">Database Configuration</a></li><li><a href="#security-configuration" class="table-of-contents__link toc-highlight">Security Configuration</a></li><li><a href="#services-configuration" class="table-of-contents__link toc-highlight">Services Configuration</a><ul><li><a href="#key-access-server-kas" class="table-of-contents__link toc-highlight">Key Access Server (KAS)</a></li><li><a href="#authorization" class="table-of-contents__link toc-highlight">Authorization</a></li><li><a href="#entity-resolution" class="table-of-contents__link toc-highlight">Entity Resolution</a></li><li><a href="#policy" class="table-of-contents__link toc-highlight">Policy</a></li><li><a href="#casbin-endpoint-authorization" class="table-of-contents__link toc-highlight">Casbin Endpoint Authorization</a></li></ul></li><li><a href="#cache-configuration" class="table-of-contents__link toc-highlight">Cache Configuration</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sponsors</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://virtru.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Virtru<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/preview-ad81f576/getting-started/configuration">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/preview-ad81f576/introduction">Documentation</a></li><li class="footer__item"><a href="https://github.com/orgs/opentdf/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/orgs/opentdf/discussions/categories/show-and-tell" target="_blank" rel="noopener noreferrer" class="footer__link-item">Showcase<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/orgs/opentdf/discussions/1806" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/preview-ad81f576/privacy-policy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/preview-ad81f576/cookie-policy">Cookie Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/preview-ad81f576/terms-of-service">Terms of Service</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opentdf.io" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/preview-ad81f576/img/opentdf-logo-horizontal.png" alt="OpenTDF Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/preview-ad81f576/img/opentdf-logo-horizontal.png" alt="OpenTDF Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">
          <span>Copyright © 2026 OpenTDF</span>
          <iconify-icon data-icon="mdi:shield-check" style="color: #00FF00;"></iconify-icon>
        </div></div></div></footer></div>
</body>
</html>