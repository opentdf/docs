import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<details>
<summary>Get Decision</summary>
<Tabs>
<TabItem value="go" label="Go">

```go
package main

import (
	"context"
	"log"

	"github.com/opentdf/platform/protocol/go/authorization"
	"github.com/opentdf/platform/protocol/go/entity"
	"github.com/opentdf/platform/protocol/go/policy"
	"github.com/opentdf/platform/sdk"
)

func main() {

	platformEndpoint := "http://localhost:8080"

	// Create a new client
	client, err := sdk.New(
		platformEndpoint,
		sdk.WithClientCredentials("opentdf", "secret", nil),
	)

	if err != nil {
		log.Fatal(err)
	}

	// Get Decision using v2 API
	decisionReq := &authorization.GetDecisionRequest{
		EntityIdentifier: &authorization.EntityIdentifier{
			EntityChain: &entity.EntityChain{
				Entities: []*entity.Entity{
					{
						Id: "entity-1",
						EntityType: &entity.Entity_ClientId{
							ClientId: "opentdf",
						},
					},
				},
			},
		},
		Action: &policy.Action{
			Name: "decrypt",
		},
		Resource: &authorization.Resource{
			AttributeValues: &authorization.Resource_AttributeValues{
				Fqns: []string{"https://opentdf.io/attr/role/value/developer"},
			},
		},
	}

	decision, err := client.Authorization.GetDecision(context.Background(), decisionReq)
	if err != nil {
		log.Fatal(err)
	}

	decisionResult := decision.GetDecision()
	log.Printf("Decision: %v", decisionResult.GetDecision())
	if decisionResult.GetDecision() == authorization.Decision_DECISION_PERMIT && len(decisionResult.GetObligations()) > 0 {
		log.Printf("Obligations: %v", decisionResult.GetObligations())
	}
}
```

</TabItem>
<TabItem value="java" label="Java">

```java
package io.opentdf.platform;
import io.opentdf.platform.sdk.*;

import java.util.concurrent.ExecutionException;

import io.opentdf.platform.authorization.*;
import io.opentdf.platform.entity.*;
import io.opentdf.platform.policy.*;

public class GetDecision {
    public static void main(String[] args) throws ExecutionException, InterruptedException{

        String clientId = "opentdf";
        String clientSecret = "secret";
        String platformEndpoint = "http://localhost:8080";

        SDKBuilder builder = new SDKBuilder();
        SDK sdk = builder.platformEndpoint(platformEndpoint)
                .clientSecret(clientId, clientSecret).useInsecurePlaintextConnection(true)
                .build();
    
        // Get Decision using v2 API
        GetDecisionRequest request = GetDecisionRequest.newBuilder()
            .setEntityIdentifier(
                EntityIdentifier.newBuilder()
                    .setEntityChain(
                        EntityChain.newBuilder()
                            .addEntities(
                                Entity.newBuilder()
                                    .setId("entity-1")
                                    .setClientId("opentdf")
                            )
                    )
            )
            .setAction(
                Action.newBuilder()
                    .setName("decrypt")
            )
            .setResource(
                Resource.newBuilder()
                    .setAttributeValues(
                        Resource.AttributeValues.newBuilder()
                            .addFqns("https://opentdf.io/attr/role/value/developer")
                    )
            )
            .build();

        GetDecisionResponse resp = sdk.getServices().authorization().getDecision(request).get();

        Decision decision = resp.getDecision();
        System.out.println("Decision: " + decision.getDecision());
        if (decision.getDecision() == Decision.DECISION_PERMIT && decision.getObligationsCount() > 0) {
            System.out.println("Obligations: " + decision.getObligationsList());
        }
    }
}
```

</TabItem>
<TabItem value="js" label="Javascript">

```javascript
const { AuthzClient } = require('@opentdf/client');

async function main() {
  const platformEndpoint = 'http://localhost:8080';
  const clientId = 'opentdf';
  const clientSecret = 'secret';

  // Create a new client
  const client = new AuthzClient({
    endpoint: platformEndpoint,
    auth: {
      clientId,
      clientSecret
    }
  });

  // Get Decision using v2 API
  const request = {
    entityIdentifier: {
      entityChain: {
        entities: [{
          id: 'entity-1',
          clientId: 'opentdf'
        }]
      }
    },
    action: {
      name: 'decrypt'
    },
    resource: {
      attributeValues: {
        fqns: ['https://opentdf.io/attr/role/value/developer']
      }
    }
  };

  try {
    const response = await client.getDecision(request);
    
    console.log('Decision:', response.decision.decision);
    if (response.decision.decision === 'DECISION_PERMIT' && response.decision.obligations?.length > 0) {
      console.log('Obligations:', response.decision.obligations);
    }
  } catch (error) {
    console.error('Error:', error);
  }
}

main();
```

</TabItem>
</Tabs>
</details>